{"version":3,"file":"static/js/339.c07bd00a.chunk.js","mappings":"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","sources":["components/Chat/ChatView.jsx","components/Chat/ChatInput.jsx","utils/formatters.js","components/Chat/CodeBlock.jsx","components/Chat/MessageRating.jsx","components/Chat/Message.jsx","utils/themeUtils.js","components/Chat/LoadingIndicator.jsx"],"sourcesContent":["// src/components/Chat/ChatView.jsx\r\n\r\nimport { useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Message } from './Message';\r\nimport { ChatInput } from './ChatInput';\r\nimport { LoadingIndicator } from './LoadingIndicator';\r\n\r\nexport const ChatView = ({ messages, loading, onSend, onRate }) => {\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col relative\">\r\n      {/* Messages Area */}\r\n      <div className=\"flex-1 overflow-y-auto w-full max-w-4xl mx-auto px-4 pb-32\">\r\n        <div className=\"flex flex-col gap-10 py-4\">\r\n          {messages.map((msg) => (\r\n            <Message key={msg.id} message={msg} onRate={onRate} />\r\n          ))}\r\n          {loading && <LoadingIndicator />}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Fixed Input at Bottom */}\r\n      <div className=\"fixed bottom-8 left-0 right-0 px-4 flex flex-col items-center z-40 pointer-events-none\">\r\n        <div className=\"w-full max-w-3xl pointer-events-auto\">\r\n          <ChatInput onSend={onSend} loading={loading} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nChatView.propTypes = {\r\n  messages: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      role: PropTypes.string.isRequired,\r\n      content: PropTypes.string.isRequired\r\n    })\r\n  ).isRequired,\r\n  loading: PropTypes.bool.isRequired,\r\n  onSend: PropTypes.func.isRequired,\r\n  onRate: PropTypes.func.isRequired\r\n};\r\n","// src/components/Chat/ChatInput.jsx\r\n\r\nimport { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Send, Plus } from 'lucide-react';\r\nimport { useTheme } from '../../hooks/useTheme';\r\nimport { useLanguage } from '../../contexts/LanguageContext';\r\nimport { LIMITS } from '../../constants';\r\n\r\nexport const ChatInput = ({ onSend, loading }) => {\r\n  const { theme } = useTheme();\r\n  const { t } = useLanguage();\r\n  const [input, setInput] = useState('');\r\n  const isDark = theme === 'dark';\r\n\r\n  const handleSend = () => {\r\n    const trimmedInput = input.trim();\r\n    if (trimmedInput && !loading && trimmedInput.length <= LIMITS.MAX_MESSAGE_LENGTH) {\r\n      onSend(trimmedInput);\r\n      setInput('');\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Input Container with Gradient Glow */}\r\n      <div className=\"relative group\">\r\n        <div className={`absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl ${\r\n          isDark ? 'opacity-20 group-hover:opacity-40' : 'opacity-10 group-hover:opacity-20'\r\n        } blur transition duration-500`} />\r\n\r\n        <div className={`relative flex items-center ${\r\n          isDark ? 'glass-input' : 'bg-white border border-gray-300'\r\n        } rounded-2xl p-2 transition-all duration-300`}>\r\n          {/* Add Button */}\r\n          <button\r\n            type=\"button\"\r\n            className={`p-2 ${\r\n              isDark ? 'text-gray-400 hover:text-white hover:bg-white/5' : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\r\n            } transition-colors rounded-xl`}\r\n            aria-label=\"Add attachment\"\r\n          >\r\n            <Plus className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Input Field */}\r\n          <label htmlFor=\"chat-input\" className=\"sr-only\">\r\n            {t('chat.inputLabel')}\r\n          </label>\r\n          <input\r\n            id=\"chat-input\"\r\n            type=\"text\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder={t('chat.placeholder')}\r\n            maxLength={LIMITS.MAX_MESSAGE_LENGTH}\r\n            className={`w-full bg-transparent border-none ${\r\n              isDark ? 'text-white placeholder-gray-500' : 'text-gray-900 placeholder-gray-400'\r\n            } focus:ring-0 text-sm py-3 px-2 font-light focus:outline-none`}\r\n            disabled={loading}\r\n          />\r\n\r\n          {/* Send Button */}\r\n          <button\r\n            onClick={handleSend}\r\n            disabled={loading || !input.trim()}\r\n            className={`p-2 ${\r\n              isDark\r\n                ? 'bg-white text-black hover:bg-gray-200 shadow-lg shadow-white/10'\r\n                : 'bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-500/20'\r\n            } rounded-xl transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed`}\r\n            aria-label={t('chat.sendLabel')}\r\n          >\r\n            <Send className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Helper Text */}\r\n      <p className={`text-center text-[10px] ${\r\n        isDark ? 'text-gray-600' : 'text-gray-500'\r\n      } mt-3 font-medium tracking-wide`}>\r\n        {t('chat.disclaimer') || 'AI can make mistakes. Consider checking important information.'}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nChatInput.propTypes = {\r\n  onSend: PropTypes.func.isRequired,\r\n  loading: PropTypes.bool.isRequired\r\n};\r\n","// src/utils/formatters.js\r\n\r\nexport const formatTime = (date) => {\r\n  return new Date(date).toLocaleTimeString('ru-RU', { \r\n    hour: '2-digit', \r\n    minute: '2-digit' \r\n  });\r\n};\r\n\r\nexport const formatDate = (date) => {\r\n  return new Date(date).toLocaleDateString('ru-RU', {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    year: 'numeric'\r\n  });\r\n};\r\n\r\nexport const formatDateTime = (date) => {\r\n  return new Date(date).toLocaleString('ru-RU', {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    year: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  });\r\n};","// src/components/Chat/CodeBlock.jsx\r\n\r\nimport { useState } from 'react';\r\nimport { Copy, Check } from 'lucide-react';\r\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\r\nimport { vscDarkPlus, vs } from 'react-syntax-highlighter/dist/esm/styles/prism';\r\nimport { useTheme } from '../../hooks/useTheme';\r\nimport { useLanguage } from '../../contexts/LanguageContext';\r\n\r\nexport const CodeBlock = ({ language, value }) => {\r\n  const { theme } = useTheme();\r\n  const { t } = useLanguage();\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const handleCopy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(value);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (error) {\r\n      console.error('Failed to copy:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative group my-4\">\r\n      <button\r\n        onClick={handleCopy}\r\n        className=\"absolute right-2 top-2 p-2 rounded bg-gray-700 hover:bg-gray-600 text-white opacity-0 group-hover:opacity-100 transition-opacity z-10\"\r\n        title={copied ? t('common.copied') : t('common.copy')}\r\n        aria-label={copied ? t('common.copied') : t('common.copy')}\r\n      >\r\n        {copied ? (\r\n          <Check className=\"w-4 h-4 text-green-400\" aria-hidden=\"true\" />\r\n        ) : (\r\n          <Copy className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n        )}\r\n      </button>\r\n      <SyntaxHighlighter\r\n        language={language}\r\n        style={theme === 'dark' ? vscDarkPlus : vs}\r\n        customStyle={{\r\n          borderRadius: '0.5rem',\r\n          padding: '1rem',\r\n          fontSize: '0.875rem',\r\n          margin: 0\r\n        }}\r\n      >\r\n        {value}\r\n      </SyntaxHighlighter>\r\n    </div>\r\n  );\r\n};\r\n","// src/components/Chat/MessageRating.jsx\r\n\r\nimport { ThumbsUp, ThumbsDown } from 'lucide-react';\r\nimport { useTheme } from '../../hooks/useTheme';\r\n\r\nexport const MessageRating = ({ rating, onRate }) => {\r\n  const { theme } = useTheme();\r\n\r\n  const getButtonClass = (type) => {\r\n    const isActive = rating === type;\r\n    const activeColor = type === 'up' ? 'text-green-500' : 'text-red-500';\r\n    const inactiveColor = theme === 'dark' ? 'text-gray-400' : 'text-gray-500';\r\n    return `p-1 rounded hover:bg-opacity-20 hover:bg-white transition ${isActive ? activeColor : inactiveColor}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex gap-2\" role=\"group\" aria-label=\"Оценка ответа\">\r\n      <button\r\n        onClick={() => onRate('up')}\r\n        className={getButtonClass('up')}\r\n        title=\"Полезный ответ\"\r\n        aria-label=\"Отметить как полезный\"\r\n        aria-pressed={rating === 'up'}\r\n      >\r\n        <ThumbsUp className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n      </button>\r\n      <button\r\n        onClick={() => onRate('down')}\r\n        className={getButtonClass('down')}\r\n        title=\"Не помог\"\r\n        aria-label=\"Отметить как неполезный\"\r\n        aria-pressed={rating === 'down'}\r\n      >\r\n        <ThumbsDown className=\"w-4 h-4\" aria-hidden=\"true\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","// src/components/Chat/Message.jsx\r\n\r\nimport { memo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { Bot, User } from 'lucide-react';\r\nimport { useTheme } from '../../hooks/useTheme';\r\nimport { useLanguage } from '../../contexts/LanguageContext';\r\nimport { formatTime } from '../../utils/formatters';\r\nimport { CodeBlock } from './CodeBlock';\r\nimport { MessageRating } from './MessageRating';\r\n\r\nexport const Message = memo(({ message, onRate }) => {\r\n  const { theme } = useTheme();\r\n  const { t } = useLanguage();\r\n  const isUser = message.role === 'user';\r\n  const isDark = theme === 'dark';\r\n\r\n  const handleRate = (value) => {\r\n    onRate(message.id, value);\r\n  };\r\n\r\n  if (isUser) {\r\n    return (\r\n      <article className=\"flex flex-row-reverse gap-4 group animate-slideUp\">\r\n        {/* User Avatar */}\r\n        <div className=\"flex-shrink-0 mt-1\">\r\n          <div className={`w-8 h-8 rounded-full ${\r\n            isDark ? 'bg-white/10 border border-white/5' : 'bg-gray-200 border border-gray-300'\r\n          } flex items-center justify-center`}>\r\n            <User className={`w-4 h-4 ${isDark ? 'text-white' : 'text-gray-700'}`} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* User Message */}\r\n        <div className=\"flex flex-col items-end gap-2 max-w-2xl\">\r\n          <div className={`${\r\n            isDark ? 'glass border-primary/20 bg-primary/10' : 'bg-indigo-100 border border-indigo-200'\r\n          } rounded-2xl rounded-tr-sm px-5 py-3 ${isDark ? 'shadow-glow-sm' : 'shadow-sm'}`}>\r\n            <p className={`text-sm ${isDark ? 'text-white' : 'text-gray-900'} font-medium whitespace-pre-wrap`}>\r\n              {message.content}\r\n            </p>\r\n          </div>\r\n          <span className={`text-[10px] ${isDark ? 'text-gray-600' : 'text-gray-500'} mr-1`}>\r\n            {formatTime(message.timestamp)}\r\n          </span>\r\n        </div>\r\n      </article>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <article className=\"flex gap-4 group animate-slideUp\">\r\n      {/* AI Avatar */}\r\n      <div className=\"flex-shrink-0 mt-1\">\r\n        <div className={`w-8 h-8 rounded-xl ${\r\n          isDark ? 'bg-surface border border-white/10' : 'bg-indigo-100 border border-indigo-200'\r\n        } flex items-center justify-center text-primary ${isDark ? 'shadow-glow-sm' : ''}`}>\r\n          <Bot className=\"w-4 h-4\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Message */}\r\n      <div className=\"flex flex-col gap-2 max-w-3xl w-full\">\r\n        {/* Header */}\r\n        <div className=\"flex items-baseline gap-2 mb-1\">\r\n          <span className={`text-sm font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>\r\n            {t('chat.assistant')}\r\n          </span>\r\n          <span className={`text-[10px] ${isDark ? 'text-gray-500' : 'text-gray-400'}`}>\r\n            {formatTime(message.timestamp)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className={`prose ${isDark ? 'prose-invert' : ''} max-w-none text-sm`}>\r\n          <ReactMarkdown\r\n            components={{\r\n              code({ node, inline, className, children, ...props }) {\r\n                const match = /language-(\\w+)/.exec(className || '');\r\n                return !inline && match ? (\r\n                  <CodeBlock\r\n                    language={match[1]}\r\n                    value={String(children).replace(/\\n$/, '')}\r\n                    {...props}\r\n                  />\r\n                ) : (\r\n                  <code\r\n                    className={`${\r\n                      isDark\r\n                        ? 'text-indigo-300 bg-indigo-500/10'\r\n                        : 'text-indigo-700 bg-indigo-100'\r\n                    } px-1.5 py-0.5 rounded text-xs font-mono`}\r\n                    {...props}\r\n                  >\r\n                    {children}\r\n                  </code>\r\n                );\r\n              },\r\n              p({ children }) {\r\n                return <p className={`leading-7 ${isDark ? 'text-gray-300' : 'text-gray-700'}`}>{children}</p>;\r\n              },\r\n              strong({ children }) {\r\n                return <strong className={`font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>{children}</strong>;\r\n              },\r\n              ul({ children }) {\r\n                return <ul className={`list-disc pl-4 space-y-1 mt-2 mb-4 ${\r\n                  isDark ? 'text-gray-400 marker:text-indigo-500' : 'text-gray-600 marker:text-indigo-600'\r\n                }`}>{children}</ul>;\r\n              },\r\n              ol({ children }) {\r\n                return <ol className={`list-decimal pl-4 space-y-1 mt-2 mb-4 ${\r\n                  isDark ? 'text-gray-400' : 'text-gray-600'\r\n                }`}>{children}</ol>;\r\n              }\r\n            }}\r\n          >\r\n            {message.content}\r\n          </ReactMarkdown>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex gap-3 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\r\n          <MessageRating rating={message.rating} onRate={handleRate} />\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n});\r\n\r\nMessage.propTypes = {\r\n  message: PropTypes.shape({\r\n    id: PropTypes.string.isRequired,\r\n    role: PropTypes.oneOf(['user', 'assistant']).isRequired,\r\n    content: PropTypes.string.isRequired,\r\n    timestamp: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\r\n    rating: PropTypes.oneOf(['up', 'down', null]),\r\n    error: PropTypes.bool\r\n  }).isRequired,\r\n  onRate: PropTypes.func.isRequired\r\n};\r\n","// src/utils/themeUtils.js\r\n// Утилиты для работы с темой - устраняют дублирование className\r\n\r\nexport const themeClasses = {\r\n  // Фоны\r\n  bg: (theme) => (theme === 'dark' ? 'bg-gray-800' : 'bg-white'),\r\n  bgPrimary: (theme) => (theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'),\r\n  bgSecondary: (theme) => (theme === 'dark' ? 'bg-gray-700' : 'bg-gray-100'),\r\n  bgHover: (theme) => (theme === 'dark' ? 'hover:bg-gray-700' : 'hover:bg-gray-100'),\r\n  bgGradient: (theme) =>\r\n    theme === 'dark'\r\n      ? 'bg-gray-900'\r\n      : 'bg-gradient-to-br from-blue-50 to-indigo-100',\r\n\r\n  // Тексты\r\n  text: (theme) => (theme === 'dark' ? 'text-white' : 'text-gray-800'),\r\n  textSecondary: (theme) => (theme === 'dark' ? 'text-gray-300' : 'text-gray-600'),\r\n  textMuted: (theme) => (theme === 'dark' ? 'text-gray-400' : 'text-gray-500'),\r\n\r\n  // Границы\r\n  border: (theme) => (theme === 'dark' ? 'border-gray-700' : 'border-gray-200'),\r\n  borderSecondary: (theme) => (theme === 'dark' ? 'border-gray-600' : 'border-gray-300'),\r\n\r\n  // Комбинированные\r\n  card: (theme) =>\r\n    theme === 'dark'\r\n      ? 'bg-gray-800 border-gray-700'\r\n      : 'bg-white border-gray-200',\r\n  input: (theme) =>\r\n    theme === 'dark'\r\n      ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\r\n      : 'bg-white border-gray-300 text-gray-800 placeholder-gray-500',\r\n};\r\n\r\n// Хелпер для объединения классов\r\nexport const cn = (...classes) => classes.filter(Boolean).join(' ');\r\n","// src/components/Chat/LoadingIndicator.jsx\r\n\r\nimport { Loader2 } from 'lucide-react';\r\nimport { useTheme } from '../../hooks/useTheme';\r\nimport { useLanguage } from '../../contexts/LanguageContext';\r\nimport { themeClasses } from '../../utils/themeUtils';\r\n\r\nexport const LoadingIndicator = () => {\r\n  const { theme } = useTheme();\r\n  const { t } = useLanguage();\r\n\r\n  return (\r\n    <div className=\"flex justify-start mb-4 animate-fadeIn\" role=\"status\" aria-live=\"polite\">\r\n      <div\r\n        className={`${themeClasses.card(theme)} border rounded-lg p-4 flex items-center gap-2 shadow-sm`}\r\n      >\r\n        <Loader2 className=\"w-4 h-4 animate-spin text-indigo-600\" aria-hidden=\"true\" />\r\n        <span className={`${themeClasses.textSecondary(theme)} text-sm`}>\r\n          {t('chat.thinking')}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["ChatView","_ref","messages","loading","onSend","onRate","messagesEndRef","useRef","useEffect","_messagesEndRef$curre","current","scrollIntoView","behavior","_jsxs","className","children","_jsx","map","msg","Message","message","id","LoadingIndicator","ref","ChatInput","theme","useTheme","t","useLanguage","input","setInput","useState","isDark","handleSend","trimmedInput","trim","length","LIMITS","MAX_MESSAGE_LENGTH","concat","type","Plus","htmlFor","value","onChange","e","target","onKeyDown","key","shiftKey","preventDefault","placeholder","maxLength","disabled","onClick","Send","formatTime","date","Date","toLocaleTimeString","hour","minute","CodeBlock","language","copied","setCopied","async","navigator","clipboard","writeText","setTimeout","error","console","title","Check","Copy","SyntaxHighlighter","style","vscDarkPlus","vs","customStyle","borderRadius","padding","fontSize","margin","MessageRating","rating","getButtonClass","role","ThumbsUp","ThumbsDown","memo","isUser","User","content","timestamp","Bot","ReactMarkdown","components","code","_ref2","node","inline","props","_objectWithoutProperties","_excluded","match","exec","_objectSpread","String","replace","p","_ref3","strong","_ref4","ul","_ref5","ol","_ref6","themeClasses","Loader2"],"ignoreList":[],"sourceRoot":""}