"use strict";(self.webpackChunkeducational_ai_platform=self.webpackChunkeducational_ai_platform||[]).push([[354],{1908(e,t,s){s.d(t,{G:()=>r});const a=[{id:"task_python_core_1",stageId:"python",title:"Input Validation for Registration",scenario:"You are implementing backend validation for a registration form in a learning platform.",language:"python",difficulty:"easy",starterCode:'def validate_user(name, age, email):\n    # return {"ok": bool, "errors": list[str]}\n    pass',requirements:["Reject empty name","Age must be between 13 and 120",'Email must contain "@" and "."','Return dictionary with keys "ok" and "errors"'],hiddenChecks:[{id:"function_exists",type:"must_contain",rule:"def validate_user",weight:20},{id:"returns_dict",type:"must_contain",rule:'"ok"',weight:10},{id:"has_email_check",type:"must_contain",rule:"@",weight:10},{id:"no_placeholder",type:"must_not_contain",rule:"pass",weight:15},{id:"uses_errors_collection",type:"must_contain",rule:"errors",weight:10}],rubric:[{id:"correctness",maxScore:40},{id:"code_quality",maxScore:20},{id:"edge_cases",maxScore:25},{id:"readability",maxScore:15}],maxAttempts:3,passScore:85},{id:"task_javascript_core_1",stageId:"javascript",title:"Filter and Sort Product List",scenario:"You are building product search in an online marketplace.",language:"javascript",difficulty:"medium",starterCode:"function prepareProducts(products, minPrice, query) {\n  // return array filtered by minPrice and query, sorted by price asc\n}",requirements:["Filter by minimum price","Filter by query in product title, case-insensitive","Sort result by price ascending","Do not mutate original array"],hiddenChecks:[{id:"function_exists",type:"must_contain",rule:"function prepareProducts",weight:20},{id:"uses_filter",type:"must_contain",rule:".filter(",weight:10},{id:"uses_sort",type:"must_contain",rule:".sort(",weight:10},{id:"case_insensitive",type:"must_contain",rule:"toLowerCase",weight:10},{id:"no_todo",type:"must_not_contain",rule:"TODO",weight:10}],rubric:[{id:"correctness",maxScore:40},{id:"code_quality",maxScore:20},{id:"edge_cases",maxScore:25},{id:"readability",maxScore:15}],maxAttempts:3,passScore:85},{id:"task_html_core_1",stageId:"html",title:"Accessible Login Form",scenario:"Create a semantic login form for a real product sign-in page.",language:"html_css",difficulty:"easy",starterCode:'<main class="login-page">\n  \x3c!-- build form here --\x3e\n</main>',requirements:["Use semantic tags (main, form, label, input, button)","Each input must have matching label",'Email field should use type="email"','Password field should use type="password"'],hiddenChecks:[{id:"has_form",type:"regex",rule:"<form[\\s\\S]*?>",weight:20},{id:"has_label",type:"regex",rule:"<label[\\s\\S]*?>",weight:15},{id:"email_type",type:"must_contain",rule:'type="email"',weight:10},{id:"password_type",type:"must_contain",rule:'type="password"',weight:10},{id:"has_button",type:"regex",rule:"<button[\\s\\S]*?>",weight:10}],rubric:[{id:"correctness",maxScore:40},{id:"code_quality",maxScore:20},{id:"edge_cases",maxScore:25},{id:"readability",maxScore:15}],maxAttempts:3,passScore:85},{id:"task_css_core_1",stageId:"css",title:"Responsive Card Layout",scenario:"Design a responsive card grid for a dashboard.",language:"html_css",difficulty:"medium",starterCode:".cards {\n  /* build responsive layout */\n}\n\n.card {\n}",requirements:["Use grid or flex layout","Cards must wrap on smaller screens","Keep spacing between cards","Add hover state for card"],hiddenChecks:[{id:"uses_layout",type:"regex",rule:"display:\\s*(grid|flex)",weight:20},{id:"has_gap",type:"must_contain",rule:"gap",weight:10},{id:"responsive_rule",type:"must_contain",rule:"@media",weight:10},{id:"hover_state",type:"must_contain",rule:":hover",weight:10},{id:"no_inline_style",type:"must_not_contain",rule:"style=",weight:5}],rubric:[{id:"correctness",maxScore:40},{id:"code_quality",maxScore:20},{id:"edge_cases",maxScore:25},{id:"readability",maxScore:15}],maxAttempts:3,passScore:85},{id:"task_react_core_1",stageId:"react",title:"Task List Component with Filters",scenario:"Build a mini feature for a project board with state and filtering.",language:"javascript",difficulty:"medium",starterCode:'import { useState } from "react";\n\nexport default function TaskList({ tasks = [] }) {\n  // Implement filter by status and render list\n  return null;\n}',requirements:["Use useState for active filter","Render filtered list from props.tasks","Show empty state when no tasks","Use stable key for each item"],hiddenChecks:[{id:"uses_usestate",type:"must_contain",rule:"useState(",weight:20},{id:"renders_map",type:"must_contain",rule:".map(",weight:10},{id:"has_key",type:"must_contain",rule:"key=",weight:10},{id:"empty_state",type:"must_contain",rule:"length",weight:10},{id:"no_todo",type:"must_not_contain",rule:"TODO",weight:10}],rubric:[{id:"correctness",maxScore:40},{id:"code_quality",maxScore:20},{id:"edge_cases",maxScore:25},{id:"readability",maxScore:15}],maxAttempts:3,passScore:85}],r=e=>a.find(t=>t.stageId===e)||null},2251(e,t,s){s.d(t,{A9:()=>p,E6:()=>v,Tk:()=>b,UN:()=>f,XN:()=>y,Ys:()=>N,cG:()=>u,ec:()=>j,ev:()=>k,p5:()=>g,vD:()=>x,vO:()=>C});var a=s(9379),r=s(7644),l=s(1908),i=s(325);const n="learning_progress",o=()=>{(()=>{const e=(0,i.rM)();if(e&&e>=2)return;const t=(0,i.ru)();t?t.version||(0,i.i1)((0,a.A)((0,a.A)({},t),{},{version:2})):(0,i.i1)({version:2,stages:{}}),(0,i.qV)(2)})();try{const e=localStorage.getItem(n);return e?JSON.parse(e):{materials:{},quizzes:{}}}catch(e){return console.error("Failed to read progress:",e),{materials:{},quizzes:{}}}},c=e=>{try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.error("Failed to save progress:",t)}},d=()=>(0,i.ru)()||{version:2,stages:{}},m=e=>{(0,i.i1)((0,a.A)((0,a.A)((0,a.A)({},{version:2,stages:{}}),e),{},{version:2}))},u=e=>{const t=o();return t.materials[e]={completed:!0,completedAt:Date.now()},c(t),t},x=e=>{const t=o();return t.materials[e]&&(t.materials[e].completed=!1),c(t),t},g=e=>{var t;return(null===(t=o().materials[e])||void 0===t?void 0:t.completed)||!1},h=()=>{const e=o();return Object.entries(e.materials).filter(e=>{let[,t]=e;return t.completed}).map(e=>{let[t]=e;return Number(t)})},p=(e,t,s)=>{const a=o();return a.quizzes[e]={completed:!0,score:Math.round(t/s*100),correctAnswers:t,totalQuestions:s,completedAt:Date.now()},c(a),a},b=e=>o().quizzes[e]||null,y=(e,t,s,r)=>{var i,n;const o=d(),c=((e,t)=>e.stages[t]||{tasks:{}})(o,e),u=c.tasks[t]||{attempts:[],bestScore:0,passed:!1,status:"not_started"},x=u.attempts.length+1,g={id:"".concat(t,"_").concat(Date.now()),attemptNumber:x,code:s,score:(null===r||void 0===r?void 0:r.finalScore)||0,feedback:(null===r||void 0===r?void 0:r.feedback)||null,submittedAt:Date.now()},h=Math.max(u.bestScore||0,g.score),p=(null===(i=(0,l.G)(e))||void 0===i?void 0:i.maxAttempts)||3,b=h>=((null===(n=(0,l.G)(e))||void 0===n?void 0:n.passScore)||85),y=b?"passed":x>=p?"attempts_exhausted":"failed",f=(0,a.A)((0,a.A)({},u),{},{attempts:[...u.attempts,g],bestScore:h,passed:b,status:y,updatedAt:Date.now()}),v=(0,a.A)((0,a.A)({},o),{},{stages:(0,a.A)((0,a.A)({},o.stages),{},{[e]:(0,a.A)((0,a.A)({},c),{},{tasks:(0,a.A)((0,a.A)({},c.tasks),{},{[t]:f})})})});return m(v),f},f=(e,t)=>{var s,a,r;return(null===(s=d().stages[e])||void 0===s||null===(a=s.tasks)||void 0===a||null===(r=a[t])||void 0===r?void 0:r.attempts)||[]},v=(e,t)=>{var s,a,r;return(null===(s=d().stages[e])||void 0===s||null===(a=s.tasks)||void 0===a||null===(r=a[t])||void 0===r?void 0:r.bestScore)||0},j=(e,t)=>{var s,a,r;return(null===(s=d().stages[e])||void 0===s||null===(a=s.tasks)||void 0===a||null===(r=a[t])||void 0===r?void 0:r.status)||"not_started"},w=e=>{var t,s,a;const r=(0,l.G)(e);if(!r)return!1;const i=d();return Boolean(null===(t=i.stages[e])||void 0===t||null===(s=t.tasks)||void 0===s||null===(a=s[r.id])||void 0===a?void 0:a.passed)},N=e=>{const t=(0,r.JR)(e),s=t?b(t.id):null,a=Boolean((null===s||void 0===s?void 0:s.score)>=70),l=w(e);return a&&l},k=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=h(),r=e.map(e=>e.id),i=r.filter(e=>a.includes(e)).length,n=r.length,o=t?b(t):null,c=s||null,d=c?(0,l.G)(c):null,m=d?v(c,d.id):0,u=!!d&&w(c);return{materialsCompleted:i,materialsTotal:n,materialsProgress:n>0?Math.round(i/n*100):0,quizCompleted:(null===o||void 0===o?void 0:o.completed)||!1,quizScore:(null===o||void 0===o?void 0:o.score)||0,practiceScore:m,practicePassed:u,stageCompleted:!!c&&N(c)}},C=(e,t)=>{const s=h(),r=(()=>{const e=o();return Object.entries(e.quizzes).filter(e=>{let[,t]=e;return t.completed}).map(e=>{let[t,s]=e;return(0,a.A)({id:t},s)})})(),l=e.length,i=e.filter(e=>s.includes(e.id)).length,n=t.length,c=r.filter(e=>t.includes(e.id)).length,d=l>0?i/l:0,m=n>0?c/n:0;return{materialsCompleted:i,materialsTotal:l,quizzesCompleted:c,quizzesTotal:n,overallProgress:Math.round(100*(.7*d+.3*m))}}},3246(e,t,s){s.d(t,{V:()=>c});var a=s(5043),r=s(2380),l=s(430),i=s(9402),n=s(8250),o=s(579);const c=e=>{let{onSend:t,loading:s}=e;const{t:c}=(0,i.o)(),[d,m]=(0,a.useState)(""),u=()=>{const e=d.trim();e&&!s&&e.length<=n.b1.MAX_MESSAGE_LENGTH&&(t(e),m(""))};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"relative group",children:[(0,o.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-primary to-accent opacity-20 blur transition duration-500"}),(0,o.jsxs)("div",{className:"relative flex items-center bg-surface border border-border rounded-lg p-2 transition-all duration-300",children:[(0,o.jsx)("button",{type:"button",className:"p-2 text-muted hover:text-text hover:bg-border/30 transition-colors rounded-md","aria-label":"Add attachment",children:(0,o.jsx)(r.A,{className:"w-5 h-5"})}),(0,o.jsx)("label",{htmlFor:"chat-input",className:"sr-only",children:c("chat.inputLabel")}),(0,o.jsx)("input",{id:"chat-input",type:"text",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u()),"Escape"===e.key&&m("")},placeholder:c("chat.placeholder"),maxLength:n.b1.MAX_MESSAGE_LENGTH,className:"w-full bg-transparent border-none text-text placeholder:text-muted focus:ring-0 text-sm py-3 px-2 focus:outline-none",disabled:s}),(0,o.jsx)("button",{onClick:u,disabled:s||!d.trim(),className:"p-2 bg-primary text-white hover:brightness-110 rounded-md transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed","aria-label":c("chat.sendLabel"),children:(0,o.jsx)(l.A,{className:"w-5 h-5"})})]})]}),(0,o.jsx)("p",{className:"text-center text-[10px] text-muted mt-3 font-medium tracking-wide",children:c("chat.disclaimer")||"AI can make mistakes. Consider checking important information."})]})}},4206(e,t,s){s.d(t,{X:()=>r});var a=s(579);const r=e=>{let{title:t,subtitle:s,action:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold font-display text-text",children:t}),s&&(0,a.jsx)("p",{className:"text-sm text-muted mt-1 max-w-xl",children:s})]}),r&&(0,a.jsx)("div",{children:r})]})}},5300(e,t,s){s.d(t,{A:()=>a});const a=(0,s(3797).A)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},6354(e,t,s){s.d(t,{KnowledgeView:()=>xe});var a=s(5043),r=s(4082),l=s(3797);const i=(0,l.A)("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),n=(0,l.A)("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);var o=s(5827),c=s(2771),d=s(9402),m=s(9949);const u=(0,l.A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var x=s(579);const g=e=>{let{selectedCategory:t,onSelectCategory:s,courses:a,direction:r="vertical"}=e;const{theme:l}=(0,c.D)(),{t:i}=(0,d.o)(),n="dark"===l,o="horizontal"===r?"flex flex-row overflow-x-auto gap-2 pb-2 no-scrollbar":"flex flex-col gap-1",m=e=>e?n?"bg-white/10 text-white border border-white/5 shadow-sm":"bg-indigo-100 text-indigo-700 border border-indigo-200 shadow-sm":n?"text-gray-400 hover:text-white hover:bg-white/5":"text-gray-600 hover:text-gray-900 hover:bg-gray-100";return(0,x.jsxs)("nav",{className:o,role:"tablist","aria-label":i("knowledge.filterLabel"),children:[(0,x.jsxs)("button",{onClick:()=>s("all"),className:"flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors ".concat(m("all"===t)),role:"tab","aria-selected":"all"===t,"aria-controls":"materials-list",children:[(0,x.jsx)(u,{className:"w-5 h-5 text-indigo-400"}),(0,x.jsx)("span",{className:"text-sm font-medium",children:i("knowledge.allCourses")})]}),a.map(e=>(0,x.jsxs)("button",{onClick:()=>s(e.id),className:"flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors ".concat(m(t===e.id)),role:"tab","aria-selected":t===e.id,"aria-controls":"materials-list",children:[(0,x.jsx)("span",{className:"text-xl",role:"img","aria-label":e.name,children:e.icon}),(0,x.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.id))]})};var h=s(6514);const p=(0,l.A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var b=s(2251);const y={python:{label:"PY",accent:"text-blue-400",bg:"bg-blue-500/10 border-blue-500/25"},javascript:{label:"JS",accent:"text-yellow-400",bg:"bg-yellow-500/10 border-yellow-500/25"},html:{label:"HTML",accent:"text-orange-400",bg:"bg-orange-500/10 border-orange-500/25"},css:{label:"CSS",accent:"text-indigo-400",bg:"bg-indigo-500/10 border-indigo-500/25"},react:{label:"RE",accent:"text-cyan-400",bg:"bg-cyan-500/10 border-cyan-500/25"}},f=(0,a.memo)(e=>{let{material:t,onOpen:s}=e;const{t:a}=(0,d.o)(),r=(0,b.p5)(t.id),l=y[t.category]||y.python;return(0,x.jsxs)("article",{className:"group relative rounded-2xl p-6 transition-all duration-300 cursor-pointer overflow-hidden border border-border/70 bg-surface/80 hover:border-primary/40 hover:shadow-card-hover",onClick:s,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s())},children:[(0,x.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,x.jsxs)("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[(0,x.jsx)("div",{className:"min-w-12 h-12 px-3 rounded-lg ".concat(l.bg," border flex items-center justify-center"),children:(0,x.jsx)("span",{className:"text-xs font-bold tracking-wider ".concat(l.accent),children:l.label})}),r?(0,x.jsx)("div",{className:"px-2 py-1 rounded-full bg-success/15 text-success text-[10px] font-semibold uppercase tracking-wide border border-success/30",children:"completed"}):(0,x.jsx)("div",{className:"px-2 py-1 rounded-full bg-border/30 text-[10px] text-muted font-medium uppercase tracking-wide",children:a("material.notStarted")})]}),(0,x.jsxs)("div",{className:"relative z-10",children:[(0,x.jsx)("h4",{className:"text-lg font-bold font-display mb-1 text-text tracking-tight",children:t.topic}),(0,x.jsx)("p",{className:"text-xs mb-6 leading-relaxed text-muted line-clamp-3",children:t.content}),(0,x.jsxs)("div",{className:"w-full py-2.5 rounded-lg bg-border/20 group-hover:bg-primary/20 text-sm font-medium text-text transition-all flex items-center justify-center gap-2 border border-border/60 group-hover:border-primary/40",children:[(0,x.jsx)("span",{children:a(r?"material.repeat":"material.startModule")}),r?(0,x.jsx)(h.A,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}):(0,x.jsx)(p,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"})]})]})]})});var v=s(1172),j=s(5300);const w=(0,l.A)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),N=(0,l.A)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var k=s(1702),C=s(3246),S=s(6609),A=s(7561),_=s(3950);const z={python:{label:"PY",colorClass:"text-blue-400",bgClass:"from-blue-600/20 to-yellow-500/20",borderClass:"border-blue-500/20"},javascript:{label:"JS",colorClass:"text-yellow-400",bgClass:"from-yellow-400/20 to-orange-500/20",borderClass:"border-yellow-500/20"},html:{label:"HTML",colorClass:"text-orange-400",bgClass:"from-orange-500/20 to-red-500/20",borderClass:"border-orange-500/20"},css:{label:"CSS",colorClass:"text-indigo-400",bgClass:"from-indigo-500/20 to-blue-500/20",borderClass:"border-indigo-500/20"},react:{label:"RE",colorClass:"text-cyan-400",bgClass:"from-cyan-500/20 to-blue-500/20",borderClass:"border-cyan-500/20"}},q=e=>{var t,s;let{material:r,onClose:l,onProgressChange:i}=e;const{theme:n}=(0,c.D)(),{language:o,t:m}=(0,d.o)(),[u,g]=(0,a.useState)(()=>(0,b.p5)(r.id)),[h,p]=(0,a.useState)(!1),y=(0,a.useRef)(null),f="dark"===n,q=z[r.category]||z.python,M=(0,a.useMemo)(()=>({id:(0,k.$)(),role:"assistant",content:"en"===o?"Hi! I'll help you study the topic **\"".concat(r.topic,"\"**. Ask any questions about this topic \u2014 I'll explain in detail!"):"ky"===o?'\u0421\u0430\u043b\u0430\u043c\u0430\u0442! \u0421\u0435\u043d **"'.concat(r.topic,'"** \u0442\u0435\u043c\u0430\u0441\u044b\u043d ?\u0439\u0440?\u043d??\u0433? \u0436\u0430\u0440\u0434\u0430\u043c\u0447\u044b \u0431\u043e\u043b\u043e\u043c. \u0411\u0443\u043b \u0442\u0435\u043c\u0430 \u0431\u043e\u044e\u043d\u0447\u0430 \u043a\u0430\u0430\u043b\u0430\u0433\u0430\u043d \u0441\u0443\u0440\u043e\u043e \u0431\u0435\u0440 \u2014 \u0442?\u0448?\u043d\u0434?\u0440?\u043c!'):'\u041f\u0440\u0438\u0432\u0435\u0442! \u042f \u043f\u043e\u043c\u043e\u0433\u0443 \u0442\u0435\u0431\u0435 \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u043c\u0443 **"'.concat(r.topic,'"**. \u0417\u0430\u0434\u0430\u0432\u0430\u0439 \u043b\u044e\u0431\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u044d\u0442\u043e\u0439 \u0442\u0435\u043c\u0435 \u2014 \u043e\u0431\u044a\u044f\u0441\u043d\u044e \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e!'),timestamp:new Date}),[o,r.topic]),{messages:E,loading:T,sendMessage:P,updateMessageRating:R}=(0,_.Y)({initialMessages:[M],language:o,t:m,contextOptions:{activeCategory:r.category,activeTopic:r.topic},resetKey:r.id});(0,a.useEffect)(()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[E]);const I=(0,a.useCallback)(()=>{u?((0,b.vD)(r.id),g(!1)):((0,b.cG)(r.id),g(!0)),i&&i()},[u,r.id,i]),D=(0,a.useCallback)((e,t)=>{R(e,t)},[R]);return(0,x.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,x.jsxs)("div",{className:"w-full max-w-7xl lg:h-[90vh] h-full ".concat(f?"glass":"light-glass"," rounded-3xl shadow-2xl flex flex-col overflow-hidden"),children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-5 border-b ".concat(f?"border-white/10":"border-gray-200"),children:[(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)("div",{className:"min-w-11 h-11 px-3 rounded-xl bg-gradient-to-br ".concat(q.bgClass," border ").concat(q.borderClass," flex items-center justify-center"),children:(0,x.jsx)("span",{className:"text-xs font-bold tracking-wider ".concat(q.colorClass),children:q.label})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-xl font-bold font-display ".concat(f?"text-white":"text-gray-900"),children:r.topic}),(0,x.jsx)("p",{className:"text-xs uppercase tracking-wider ".concat("text-gray-500"),children:r.category})]})]}),u&&(0,x.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-success/20 text-success border border-success/30",children:m("progress.completed")}),(0,x.jsx)("button",{onClick:l,className:"p-2 rounded-xl transition-colors ".concat(f?"hover:bg-white/10":"hover:bg-gray-100"),children:(0,x.jsx)(v.A,{className:f?"text-gray-400":"text-gray-600",size:22})})]}),(0,x.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[(0,x.jsxs)("div",{className:"".concat(h?"lg:w-1/2 w-full":"w-full"," flex flex-col transition-all duration-300 min-w-0"),children:[(0,x.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-5",children:[(0,x.jsxs)("div",{className:"p-5 rounded-2xl ".concat(f?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[(0,x.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,x.jsx)(j.A,{className:q.colorClass,size:18}),(0,x.jsx)("h3",{className:"text-base font-semibold ".concat(f?"text-white":"text-gray-900"),children:m("material.description")})]}),(0,x.jsx)("p",{className:"leading-relaxed ".concat(f?"text-gray-300":"text-gray-700"),children:r.content})]}),r.detailedContent&&(0,x.jsxs)("div",{className:"p-5 rounded-2xl ".concat(f?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[(0,x.jsx)("h3",{className:"text-base font-semibold mb-3 ".concat(f?"text-white":"text-gray-900"),children:m("material.detailedStudy")}),(0,x.jsx)("div",{className:"space-y-3 ".concat(f?"text-gray-300":"text-gray-700"),children:r.detailedContent.split("\n\n").map((e,t)=>(0,x.jsx)("p",{className:"leading-relaxed",children:e},t))})]}),(null===(t=r.examples)||void 0===t?void 0:t.length)>0&&(0,x.jsxs)("div",{className:"p-5 rounded-2xl ".concat(f?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[(0,x.jsx)("h3",{className:"text-base font-semibold mb-3 ".concat(f?"text-white":"text-gray-900"),children:m("material.examples")}),(0,x.jsx)("div",{className:"space-y-4",children:r.examples.map((e,t)=>(0,x.jsxs)("div",{className:"rounded-xl overflow-hidden border ".concat(f?"border-white/10":"border-gray-200"),children:[e.title&&(0,x.jsx)("div",{className:"px-4 py-2 text-xs font-semibold ".concat(f?"bg-white/5 text-gray-400":"bg-gray-100 text-gray-600"),children:e.title}),(0,x.jsx)("pre",{className:"p-4 text-sm overflow-x-auto whitespace-pre ".concat(f?"bg-black/40 text-green-400":"bg-gray-900 text-green-300"),children:(0,x.jsx)("code",{children:e.code})}),e.explanation&&(0,x.jsxs)("div",{className:"px-4 py-2 text-xs ".concat(f?"bg-white/3 text-gray-400":"bg-gray-50 text-gray-600"),children:["Note: ",e.explanation]})]},t))})]}),(null===(s=r.keyPoints)||void 0===s?void 0:s.length)>0&&(0,x.jsxs)("div",{className:"p-5 rounded-2xl ".concat(f?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[(0,x.jsx)("h3",{className:"text-base font-semibold mb-3 ".concat(f?"text-white":"text-gray-900"),children:m("material.keyPoints")}),(0,x.jsx)("ul",{className:"space-y-2",children:r.keyPoints.map((e,t)=>(0,x.jsxs)("li",{className:"flex items-start gap-2 text-sm ".concat(f?"text-gray-300":"text-gray-700"),children:[(0,x.jsx)("span",{className:"mt-0.5 ".concat(q.colorClass),children:"\u2022"}),e]},t))})]})]}),(0,x.jsx)("div",{className:"p-5 border-t ".concat(f?"border-white/10 bg-white/3":"border-gray-200 bg-white/60"),children:(0,x.jsxs)("div",{className:"flex gap-3",children:[(0,x.jsxs)("button",{onClick:()=>p(e=>!e),className:"flex-1 py-2.5 px-4 rounded-xl font-medium transition-all flex items-center justify-center gap-2 text-sm ".concat(h?"bg-primary text-white hover:brightness-110":f?"bg-white/10 text-gray-300 hover:bg-white/20 border border-white/10":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-200"),children:[(0,x.jsx)(w,{size:18}),m(h?"material.hideAI":"material.askAI")]}),(0,x.jsxs)("button",{onClick:I,className:"flex-1 py-2.5 px-4 rounded-xl font-medium transition-all flex items-center justify-center gap-2 text-sm ".concat(u?"bg-success text-white hover:brightness-110 shadow-lg shadow-green-600/25":"bg-primary text-white hover:brightness-110 shadow-lg shadow-primary/25"),children:[(0,x.jsx)(N,{size:18}),m(u?"material.completed":"material.markComplete")]})]})})]}),h&&(0,x.jsxs)("div",{className:"lg:w-1/2 w-full border-t lg:border-t-0 lg:border-l ".concat(f?"border-white/10":"border-gray-200"," flex flex-col min-w-0"),children:[(0,x.jsxs)("div",{className:"p-4 border-b ".concat(f?"border-white/10 bg-white/3":"border-gray-200 bg-white/60"),children:[(0,x.jsx)("h3",{className:"font-semibold ".concat(f?"text-white":"text-gray-900"),children:m("material.aiHelper")}),(0,x.jsxs)("p",{className:"text-xs ".concat("text-gray-500"),children:[m("material.askQuestionAbout"),' "',r.topic,'"']})]}),(0,x.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,x.jsxs)("div",{className:"flex flex-col gap-4",children:[E.map(e=>(0,x.jsx)(S.Q,{message:e,onRate:D},e.id)),T&&(0,x.jsx)(A.I,{}),(0,x.jsx)("div",{ref:y})]})}),(0,x.jsx)("div",{className:"p-3 border-t ".concat(f?"border-white/10":"border-gray-200"),children:(0,x.jsx)(C.V,{onSend:P,loading:T})})]})]})]})})};var M=s(917),E=s(1065),T=s(763);const P=e=>{let{quiz:t,onClose:s,onComplete:r}=e;const{theme:l}=(0,c.D)(),{t:i}=(0,d.o)(),n="dark"===l,[o,m]=(0,a.useState)(0),[u,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[y,f]=(0,a.useState)(0),[j,w]=(0,a.useState)(!1),N=t.questions[o],k=o===t.questions.length-1,C=u===(null===N||void 0===N?void 0:N.correctAnswer),S=(0,a.useCallback)(e=>{h||g(e)},[h]),A=(0,a.useCallback)(()=>{null!==u&&(p(!0),u===N.correctAnswer&&f(e=>e+1))},[u,N]),_=(0,a.useCallback)(()=>{if(k){const e=y+(C?1:0);(0,b.A9)(t.id,e,t.questions.length),w(!0),r&&r(e,t.questions.length)}else m(e=>e+1),g(null),p(!1)},[k,y,C,t,r]),z=(0,a.useCallback)(()=>{m(0),g(null),p(!1),f(0),w(!1)},[]),q=j?y:y+(h&&C?1:0),P=Math.round(q/t.questions.length*100),R=P>=70;return j?(0,x.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,x.jsx)("div",{className:"w-full max-w-md rounded-xl p-6 ".concat(n?"bg-gray-800":"bg-white"," shadow-xl"),children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center ".concat(R?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:R?(0,x.jsx)(M.A,{size:40}):(0,x.jsx)(E.A,{size:40})}),(0,x.jsx)("h2",{className:"text-xl font-bold mb-2 ".concat(n?"text-white":"text-gray-900"),children:i("quiz.results")}),(0,x.jsxs)("p",{className:"text-3xl font-bold mb-2 ".concat(R?"text-green-600":"text-red-600"),children:[P,"%"]}),(0,x.jsxs)("p",{className:"mb-4 ".concat(n?"text-gray-300":"text-gray-600"),children:[i("quiz.score"),": ",q," ",i("quiz.of")," ",t.questions.length]}),(0,x.jsx)("p",{className:"text-lg font-medium mb-6 ".concat(R?"text-green-600":"text-red-600"),children:i(R?"quiz.passed":"quiz.failed")}),(0,x.jsxs)("div",{className:"flex gap-3",children:[(0,x.jsxs)("button",{onClick:z,className:"flex-1 py-2 px-4 rounded-lg font-medium flex items-center justify-center gap-2 ".concat(n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:[(0,x.jsx)(T.A,{size:18}),i("quiz.tryAgain")]}),(0,x.jsx)("button",{onClick:s,className:"flex-1 py-2 px-4 rounded-lg font-medium bg-indigo-600 hover:bg-indigo-700 text-white",children:i("quiz.close")})]})]})})}):(0,x.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"w-full max-w-lg rounded-xl ".concat(n?"bg-gray-800":"bg-white"," shadow-xl"),children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 border-b ".concat(n?"border-gray-700":"border-gray-200"),children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"font-bold ".concat(n?"text-white":"text-gray-900"),children:t.title}),(0,x.jsxs)("p",{className:"text-sm ".concat(n?"text-gray-400":"text-gray-500"),children:[i("quiz.question")," ",o+1," ",i("quiz.of")," ",t.questions.length]})]}),(0,x.jsx)("button",{onClick:s,className:"p-2 rounded-lg ".concat(n?"hover:bg-gray-700":"hover:bg-gray-100"),"aria-label":i("common.close"),children:(0,x.jsx)(v.A,{size:20,className:n?"text-gray-400":"text-gray-500"})})]}),(0,x.jsx)("div",{className:"h-1 ".concat(n?"bg-gray-700":"bg-gray-200"),children:(0,x.jsx)("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:"".concat((o+1)/t.questions.length*100,"%")}})}),(0,x.jsxs)("div",{className:"p-6",children:[(0,x.jsx)("h3",{className:"text-lg font-medium mb-4 ".concat(n?"text-white":"text-gray-900"),children:N.question}),(0,x.jsx)("div",{className:"space-y-3",children:N.options.map((e,t)=>{const s=u===t,a=t===N.correctAnswer;let r="w-full p-4 rounded-lg border-2 text-left transition ".concat(n?"border-gray-600":"border-gray-200");return h?a?r="w-full p-4 rounded-lg border-2 text-left transition border-green-500 ".concat(n?"bg-green-900/30":"bg-green-50"):s&&!a&&(r="w-full p-4 rounded-lg border-2 text-left transition border-red-500 ".concat(n?"bg-red-900/30":"bg-red-50")):s?r="w-full p-4 rounded-lg border-2 text-left transition border-indigo-500 ".concat(n?"bg-indigo-900/30":"bg-indigo-50"):r+=" ".concat(n?"hover:border-gray-500":"hover:border-gray-300"," cursor-pointer"),(0,x.jsx)("button",{onClick:()=>S(t),disabled:h,className:r,children:(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)("span",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center text-sm font-medium ".concat(h&&a?"border-green-500 bg-green-500 text-white":h&&s&&!a?"border-red-500 bg-red-500 text-white":s?"border-indigo-500 bg-indigo-500 text-white":n?"border-gray-500 text-gray-400":"border-gray-300 text-gray-500"),children:String.fromCharCode(65+t)}),(0,x.jsx)("span",{className:n?"text-gray-200":"text-gray-700",children:e}),h&&a&&(0,x.jsx)(M.A,{size:20,className:"ml-auto text-green-500"}),h&&s&&!a&&(0,x.jsx)(E.A,{size:20,className:"ml-auto text-red-500"})]})},t)})}),h&&(0,x.jsx)("div",{className:"mt-4 p-3 rounded-lg ".concat(C?n?"bg-green-900/30 text-green-400":"bg-green-50 text-green-700":n?"bg-red-900/30 text-red-400":"bg-red-50 text-red-700"),children:C?i("quiz.correct"):"".concat(i("quiz.incorrect"),". ").concat(i("quiz.correctAnswer"),": ").concat(N.options[N.correctAnswer])})]}),(0,x.jsx)("div",{className:"p-4 border-t ".concat(n?"border-gray-700":"border-gray-200"),children:h?(0,x.jsx)("button",{onClick:_,className:"w-full py-3 rounded-lg font-medium bg-indigo-600 hover:bg-indigo-700 text-white transition",children:i(k?"quiz.finish":"quiz.next")}):(0,x.jsx)("button",{onClick:A,disabled:null===u,className:"w-full py-3 rounded-lg font-medium transition ".concat(null===u?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white"),children:i("quiz.checkAnswer")})})]})})};var R=s(9379),I=s(1969),D=s(5979);const L=e=>{let{value:t,onChange:s,language:a="javascript",disabled:r=!1}=e;return(0,x.jsx)("textarea",{"data-testid":"practice-code-editor",value:t,onChange:e=>s(e.target.value),disabled:r,spellCheck:!1,className:"w-full min-h-[260px] rounded-xl border border-border bg-black/90 text-green-300 p-4 font-mono text-sm leading-relaxed outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-70","aria-label":"Code editor (".concat(a,")")})},O=(0,l.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),F=(0,l.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),G=(0,l.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),H=(0,l.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),U={correctness:"Correctness",code_quality:"Code Quality",edge_cases:"Edge Cases",readability:"Readability"},Q=e=>{var t,s;let{result:r,passScore:l}=e;const[i,n]=(0,a.useState)(()=>new Set),o=r.score>=l,c=r.status||(o?"passed":"failed"),d=(0,a.useMemo)(()=>Object.entries(r.criterionScores||{}).map(e=>{let[t,s]=e;const a=Number(s)||0;return{key:t,label:U[t]||t,value:Math.max(0,Math.min(100,a))}}),[r.criterionScores]);return(0,x.jsxs)("section",{"data-testid":"practice-result",className:"rounded-2xl border p-4 md:p-5 ".concat(o?"border-success/40 bg-success/10":"attempts_exhausted"===c?"border-warning/40 bg-warning/10":"border-danger/40 bg-danger/10"),children:[(0,x.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[(0,x.jsx)("h4",{className:"font-bold text-text tracking-tight",children:"Evaluation Result"}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-border/20 border border-border text-muted uppercase tracking-wide",children:c}),(0,x.jsxs)("span",{"data-testid":"practice-score",className:"text-sm px-2.5 py-1 rounded-full font-semibold ".concat(o?"bg-success text-black":"bg-danger text-white"),children:[r.score,"/100"]})]})]}),(0,x.jsx)("p",{className:"text-sm text-muted mb-4",children:r.summary}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:d.map(e=>{return(0,x.jsxs)("div",{className:"rounded-xl border border-border/60 bg-bg/40 p-3",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between text-xs mb-2",children:[(0,x.jsx)("span",{className:"text-muted",children:e.label}),(0,x.jsxs)("span",{className:"font-semibold text-text",children:[e.value,"%"]})]}),(0,x.jsx)("div",{className:"h-1.5 rounded-full bg-border/40 overflow-hidden",children:(0,x.jsx)("div",{className:"h-full ".concat((t=e.value,t>=85?"bg-success":t>=70?"bg-warning":"bg-danger")),style:{width:"".concat(e.value,"%")}})})]},e.key);var t})}),(null===(t=r.issues)||void 0===t?void 0:t.length)>0&&(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsxs)("p",{className:"text-sm font-medium text-text flex items-center gap-2 mb-2",children:[(0,x.jsx)(O,{size:14,className:"text-danger"}),"Required fixes"]}),(0,x.jsx)("ul",{className:"text-xs text-muted list-disc ml-4 space-y-1",children:r.issues.map((e,t)=>(0,x.jsx)("li",{children:e},"".concat(e,"-").concat(t)))})]}),(null===(s=r.hints)||void 0===s?void 0:s.length)>0&&(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"text-sm font-medium text-text flex items-center gap-2 mb-2",children:[(0,x.jsx)(F,{size:14,className:"text-warning"}),"Hints (click to reveal)"]}),(0,x.jsx)("div",{className:"space-y-2",children:r.hints.map((e,t)=>{const s="hint-".concat(t),a=i.has(s);return(0,x.jsxs)("div",{className:"rounded-lg border border-border/70 bg-bg/40",children:[(0,x.jsxs)("button",{type:"button",onClick:()=>(e=>{n(t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})})(s),className:"w-full text-left p-3 flex items-center justify-between gap-2 hover:bg-border/20 transition-colors","aria-expanded":a,children:[(0,x.jsxs)("span",{className:"text-xs text-muted",children:["Hint ",t+1]}),a?(0,x.jsx)(G,{size:14,className:"text-muted"}):(0,x.jsx)(H,{size:14,className:"text-muted"})]}),a&&(0,x.jsx)("div",{className:"px-3 pb-3 text-xs text-text leading-relaxed border-t border-border/50",children:e})]},s)})})]})]})};var B=s(5611),X=s(8656),Y=s(325);const J={criterionScores:{correctness:0,code_quality:0,edge_cases:0,readability:0},issues:[],hints:[],summary:"Evaluation fallback was used because AI response was invalid.",confidence:.4},K=(e,t,s)=>Math.max(t,Math.min(s,e)),V=e=>{const t=Number(e);return Number.isFinite(t)?t:0},$=e=>{const t=(e=>{if(!e||"string"!==typeof e)return null;const t=e.indexOf("{"),s=e.lastIndexOf("}");if(-1===t||-1===s||s<=t)return null;const a=e.slice(t,s+1);try{return JSON.parse(a)}catch(r){return null}})(e);if(!t||"object"!==typeof t)return null;const s=t.criterionScores||{};return{criterionScores:{correctness:V(s.correctness),code_quality:V(s.code_quality),edge_cases:V(s.edge_cases),readability:V(s.readability)},issues:Array.isArray(t.issues)?t.issues.slice(0,8):[],hints:Array.isArray(t.hints)?t.hints.slice(0,8):[],summary:"string"===typeof t.summary?t.summary:"",confidence:K(V(t.confidence),0,1)}},W=async e=>{let{task:t,code:s,language:a}=e;const r=((e,t)=>{const s=(e||"").trim(),a=[];return s||a.push("Submission is empty."),s.length<20&&a.push("Submission is too short."),["TODO","FIXME"].forEach(e=>{s.includes(e)&&a.push("Forbidden placeholder found: ".concat(e))}),null!==t&&void 0!==t&&t.starterCode&&s===t.starterCode.trim()&&a.push("Starter code was submitted without changes."),{valid:0===a.length,errors:a}})(s,t);if(!r.valid)return{success:!1,finalScore:0,hiddenCheckResult:{checks:[],score:0},llmEvaluation:J,feedback:{score:0,criterionScores:J.criterionScores,issues:r.errors,hints:["Write a complete solution and try again."],summary:"Submission did not pass basic validation.",confidence:1},validationErrors:r.errors};const l=((e,t)=>{const s=(null===t||void 0===t?void 0:t.hiddenChecks)||[],a=e||"",r=s.map(e=>{let t=!1;return"must_contain"===e.type?t=a.includes(e.rule):"must_not_contain"===e.type?t=!a.includes(e.rule):"regex"===e.type?t=new RegExp(e.rule,"i").test(a):"structure"===e.type&&(t=a.toLowerCase().includes(String(e.rule).toLowerCase())),{id:e.id,passed:t,weight:e.weight||0,type:e.type,rule:e.rule}}),l=r.reduce((e,t)=>e+t.weight,0),i=r.filter(e=>e.passed).reduce((e,t)=>e+t.weight,0);return{checks:r,score:l>0?Math.round(i/l*100):0}})(s,t);let i=J;try{const e=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ru";const r=s.checks.map(e=>"".concat(e.id,": ").concat(e.passed?"pass":"fail"," (").concat(e.type,")")).join("\n");return"Language: ".concat(a,"\nTask title: ").concat(e.title,"\nScenario: ").concat(e.scenario,"\nRequirements:\n").concat(e.requirements.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),"\n\nRubric max:\n").concat(e.rubric.map(e=>"".concat(e.id,": ").concat(e.maxScore)).join("\n"),"\n\nHidden checks (already computed):\n").concat(r,"\n\nStudent submission:\n```\n").concat(t,"\n```\n")}(t,s,l,a);i=await async function(e){var t,s,a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ru";const l=(0,Y.tq)();if(!l)throw new Error("errors.apiKeyNotFound");const i=await fetch(B.W.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({model:B.W.model,messages:[{role:"system",content:(0,X.j)(r)},{role:"user",content:e}],max_tokens:Math.min(B.W.maxTokens,700),temperature:.2})});if(!i.ok)throw new Error("errors.apiError");const n=await i.json(),o=(null===n||void 0===n||null===(t=n.choices)||void 0===t||null===(s=t[0])||void 0===s||null===(a=s.message)||void 0===a?void 0:a.content)||"";return $(o)||(0,R.A)((0,R.A)({},J),{},{summary:"AI evaluation response could not be parsed."})}(e,a)}catch(c){i=(0,R.A)((0,R.A)({},J),{},{summary:"AI evaluation failed, fallback scoring was applied.",issues:["AI evaluator unavailable."],hints:["Focus on all listed requirements and run another attempt."]})}const n=((e,t)=>{const s=K(V(null===e||void 0===e?void 0:e.score),0,100),a=Object.values(t.criterionScores||{}).reduce((e,t)=>e+V(t),0),r=K(a,0,100),l=Math.round(.55*s+.45*r),i=((null===e||void 0===e?void 0:e.checks)||[]).filter(e=>!e.passed&&e.weight>=15).length;return K(l-5*i,0,100)})(l,i),o=((e,t,s,a)=>{var r,l;const i=[...((null===t||void 0===t?void 0:t.checks)||[]).filter(e=>!e.passed).map(e=>"Failed hidden check: ".concat(e.id)),...s.issues||[]].slice(0,10),n=null!==(r=s.hints)&&void 0!==r&&r.length?s.hints:["Review requirements and handle edge cases explicitly."];return{score:a,criterionScores:s.criterionScores||J.criterionScores,issues:i,hints:n,summary:s.summary||'Task "'.concat(e.title,'" evaluated.'),confidence:null!==(l=s.confidence)&&void 0!==l?l:.5}})(t,l,i,n);return{success:!0,finalScore:n,hiddenCheckResult:l,llmEvaluation:i,feedback:o,validationErrors:[]}},Z=e=>{let{task:t,stageId:s,attempts:r,onClose:l,onSubmitted:i,language:n="ru"}=e;const[o,c]=(0,a.useState)(t.starterCode||""),[d,u]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null),[p,y]=(0,a.useState)(""),[f,j]=(0,a.useState)(!1),{addXP:w}=(0,m.$)(),N=t.maxAttempts||3,k=r.length,C=0===Math.max(0,N-k),S=o.trim()!==(t.starterCode||"").trim(),A=(null===g||void 0===g?void 0:g.status)||(C?"attempts_exhausted":S||k>0?"in_progress":"not_started"),_=(0,a.useMemo)(()=>"Help me solve this practice task without giving a full solution.\nTask: ".concat(t.title,"\nScenario: ").concat(t.scenario,"\nRequirements:\n").concat(t.requirements.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),"\n\nCurrent code:\n").concat(o),[t,o]);return(0,x.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:(0,x.jsxs)("div",{className:"w-full max-w-6xl max-h-[94vh] overflow-y-auto rounded-3xl bg-[#0b1520] border border-white/10 shadow-card",children:[(0,x.jsxs)("div",{className:"flex items-start justify-between gap-4 px-5 py-4 border-b border-white/10",children:[(0,x.jsxs)("div",{className:"min-w-0",children:[(0,x.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[(0,x.jsx)("span",{className:"text-[11px] px-2 py-1 rounded-full bg-primary/20 text-primary uppercase font-semibold tracking-wider",children:t.language}),(0,x.jsx)("span",{className:"text-[11px] px-2 py-1 rounded-full uppercase tracking-wide ".concat("passed"===A?"bg-success/20 text-success":"attempts_exhausted"===A?"bg-warning/20 text-warning":"bg-border/30 text-muted"),"data-testid":"practice-status",children:A})]}),(0,x.jsx)("h3",{className:"text-xl md:text-2xl font-bold text-white",children:t.title}),(0,x.jsx)("p",{className:"text-sm text-slate-300 mt-1 max-w-3xl",children:t.scenario})]}),(0,x.jsx)("button",{onClick:l,className:"p-2 rounded-lg hover:bg-white/10 text-slate-300","aria-label":"Close practice modal",children:(0,x.jsx)(v.A,{size:18})})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 p-4",children:[(0,x.jsxs)("aside",{className:"lg:col-span-4 rounded-2xl border border-white/10 bg-[#111f2a] p-4 h-fit",children:[(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsxs)("p",{"data-testid":"practice-attempts",className:"text-xs text-slate-400 mb-2",children:["Attempts: ",k,"/",N]}),(0,x.jsx)("div",{className:"grid grid-cols-3 gap-1.5",children:Array.from({length:N}).map((e,t)=>(0,x.jsx)("div",{className:"h-1.5 rounded-full ".concat(t<k?"bg-primary shadow-glow-sm":"bg-slate-700/60")},"attempt-".concat(t)))})]}),(0,x.jsxs)("div",{className:"mb-4 rounded-xl border border-white/10 bg-black/20 p-3",children:[(0,x.jsx)("p",{className:"text-xs uppercase text-slate-400 tracking-wider mb-1",children:"Pass Conditions"}),(0,x.jsxs)("p",{className:"text-sm text-white",children:["Quiz >= 70% and Practice >= ",t.passScore,"/100"]}),(0,x.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Max attempts: ",N]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-semibold text-white mb-2",children:"Requirements"}),(0,x.jsx)("ul",{className:"space-y-2",children:t.requirements.map(e=>(0,x.jsx)("li",{className:"text-xs text-slate-300 rounded-lg border border-white/10 bg-black/20 px-3 py-2",children:e},e))})]})]}),(0,x.jsxs)("section",{className:"lg:col-span-8",children:[(0,x.jsx)("div",{className:"rounded-2xl border border-primary/30 bg-[#0f1c27] p-3 mb-3",children:(0,x.jsx)(L,{value:o,onChange:c,language:t.language,disabled:d||C})}),d&&(0,x.jsxs)("div",{className:"mb-3 rounded-xl border border-primary/30 bg-primary/10 p-3",children:[(0,x.jsx)("p",{className:"text-sm text-white mb-2",children:"Evaluating submission..."}),(0,x.jsx)("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden",children:(0,x.jsx)("div",{className:"h-full w-2/3 bg-primary animate-pulse"})})]}),p&&(0,x.jsx)("p",{className:"text-sm text-danger mb-3",children:p}),g&&(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(Q,{result:g,passScore:t.passScore})}),C&&!(null!==g&&void 0!==g&&g.passed)&&(0,x.jsxs)("div",{className:"mb-3 p-3 rounded-xl border border-warning/40 bg-warning/10",children:[(0,x.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[(0,x.jsx)(I.A,{size:16,className:"text-warning mt-0.5"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-white font-medium",children:"Attempts exhausted"}),(0,x.jsx)("p",{className:"text-xs text-slate-300",children:"You can request AI guidance, but this does not auto-pass the stage."})]})]}),(0,x.jsx)("div",{className:"flex items-center gap-2",children:(0,x.jsxs)("button",{type:"button",onClick:async()=>{try{await navigator.clipboard.writeText(_),j(!0),window.setTimeout(()=>j(!1),1800)}catch(e){j(!1)}},className:"px-3 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium flex items-center gap-2",children:[(0,x.jsx)(D.A,{size:14}),f?"Prompt copied":"Copy AI Help Prompt"]})})]}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,x.jsx)("button",{"data-testid":"submit-practice-solution",onClick:async()=>{if(!d&&!C){u(!0),y("");try{w("PRACTICE_ATTEMPT");const e=await W({task:t,code:o,language:n}),a=(0,b.XN)(s,t.id,o,e),r=((e,t,s)=>{const a=(null===t||void 0===t?void 0:t.maxAttempts)||3,r=(null===t||void 0===t?void 0:t.passScore)||85,l=s>=r,i=Math.max(0,a-e);return{passed:l,status:l?"passed":i>0?"failed":"attempts_exhausted",attemptsLeft:i,passScore:r}})(a.attempts.length,t,e.finalScore),l=(0,R.A)((0,R.A)({},e.feedback),{},{score:e.finalScore,status:r.status,passed:r.passed,attemptsLeft:r.attemptsLeft});r.passed&&w("PRACTICE_PASS"),h(l),i&&i(l)}catch(e){y("string"===typeof(null===e||void 0===e?void 0:e.message)?e.message:"Failed to submit solution.")}finally{u(!1)}}},disabled:d||C,className:"px-4 py-2 rounded-lg font-semibold ".concat(d||C?"bg-gray-500 text-white cursor-not-allowed":"bg-primary text-white hover:brightness-110 shadow-soft"),children:d?"Checking...":"Check Solution"}),(0,x.jsx)("button",{onClick:l,className:"px-4 py-2 rounded-lg border border-white/20 text-slate-200 hover:bg-white/10",children:"Close"})]})]})]})]})})};var ee=s(7644),te=s(1908),se=s(4206);const ae=(0,l.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var re=s(3986),le=s(6110);const ie=["className"],ne=e=>{let{className:t}=e,s=(0,re.A)(e,ie);return(0,x.jsx)("input",(0,R.A)({className:(0,le.cn)("w-full rounded-md border border-border bg-surface px-4 py-2.5 text-sm text-text placeholder:text-muted focus-ring",t)},s))},oe=["variant","size","className"],ce=e=>{let{variant:t="ghost",size:s="md",className:a}=e,r=(0,re.A)(e,oe);return(0,x.jsx)("button",(0,R.A)({className:(0,le.cn)("inline-flex items-center justify-center rounded-full transition focus-ring",{sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"}[s],{ghost:"bg-transparent hover:bg-border/30 text-text",soft:"bg-border/20 hover:bg-border/40 text-text",primary:"bg-primary text-white hover:brightness-110"}[t],a)},r))},de=e=>{let{value:t,onChange:s,placeholder:a}=e;return(0,x.jsxs)("div",{className:"relative w-full",children:[(0,x.jsx)(ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted"}),(0,x.jsx)(ne,{value:t,onChange:s,placeholder:a,className:"pl-9 pr-9"}),t?(0,x.jsx)(ce,{className:"absolute right-1 top-1/2 -translate-y-1/2",size:"sm",onClick:()=>s({target:{value:""}}),"aria-label":"Clear search",children:(0,x.jsx)(v.A,{className:"w-3 h-3"})}):null]})};var me=s(9780);const ue={not_started:"Not started",in_progress:"In progress",failed:"Failed",passed:"Passed",attempts_exhausted:"Attempts exhausted"},xe=e=>{var t,s;let{onCategoryChange:l,onProgressChange:u}=e;const{theme:h}=(0,c.D)(),{t:p,courseData:y,language:v}=(0,d.o)(),{addXP:j}=(0,m.$)(),[w,N]=(0,a.useState)("all"),[k,C]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!1),[_,z]=(0,a.useState)(0),[M,E]=(0,a.useState)(null),[T,R]=(0,a.useState)(""),I=(0,a.useMemo)(()=>{if(null===y||void 0===y||!y.materials)return[];let e=[];if(e="all"===w?Object.values(y.materials).flat():y.materials[w]||[],T.trim()){const t=T.toLowerCase();return e.filter(e=>e.topic.toLowerCase().includes(t)||e.content.toLowerCase().includes(t))}return e},[y,w,T]),D=(0,a.useMemo)(()=>"all"===w?null:(0,ee.JR)(w),[w]),L=(0,a.useMemo)(()=>{if("all"===w||null===y||void 0===y||!y.materials)return null;const e=y.materials[w]||[],t=null===D||void 0===D?void 0:D.id;return(0,b.ev)(e,t,w)},[w,y,D,_]),O=(0,a.useMemo)(()=>D?(0,b.Tk)(D.id):null,[D,_]),F=(0,a.useMemo)(()=>"all"===w?null:(0,te.G)(w),[w]),G=(0,a.useMemo)(()=>{if(!F||"all"===w)return null;return{attempts:(0,b.UN)(w,F.id),bestScore:(0,b.E6)(w,F.id),status:(0,b.ec)(w,F.id),stageCompleted:(0,b.Ys)(w)}},[F,w,_]),H=Boolean((null===O||void 0===O?void 0:O.score)>=70),U=(0,a.useCallback)(e=>{N(e),l&&l(e)},[l]),Q=(0,a.useCallback)(()=>{z(e=>e+1),u&&u()},[u]),B=(0,a.useCallback)(()=>{j("TEST"),z(e=>e+1),u&&u()},[j,u]),X=(0,a.useCallback)(e=>{null!==e&&void 0!==e&&e.passed&&(0,b.Ys)(w)&&j("STAGE_COMPLETE"),z(e=>e+1),u&&u()},[j,u,w]),Y="dark"===h;return y?(0,x.jsxs)("div",{className:"flex h-full gap-6",children:[(0,x.jsx)("aside",{className:"hidden lg:flex flex-col w-64 ".concat(Y?"glass":"light-glass"," rounded-2xl p-4 gap-6"),children:(0,x.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,x.jsx)("div",{className:"px-3 py-2 text-xs font-bold text-muted uppercase tracking-wider",children:p("knowledge.library")||"Library"}),(0,x.jsx)(g,{selectedCategory:w,onSelectCategory:U,courses:y.courses})]})}),(0,x.jsx)("main",{className:"flex-1 flex flex-col h-full overflow-hidden rounded-2xl relative",children:(0,x.jsxs)("div",{className:"flex-1 overflow-y-auto pb-10",children:[(0,x.jsx)(se.X,{title:p("knowledge.title")||"Knowledge Base",subtitle:p("knowledge.subtitle"),action:(0,x.jsx)("div",{className:"w-full md:w-80",children:(0,x.jsx)(de,{placeholder:p("knowledge.searchPlaceholder")||"Search modules...",value:T,onChange:e=>R(e.target.value)})})}),(0,x.jsx)("div",{className:"lg:hidden mb-6",children:(0,x.jsx)(g,{selectedCategory:w,onSelectCategory:U,courses:y.courses,direction:"horizontal"})}),"all"!==w&&!T&&L&&(0,x.jsxs)(me.Z,{className:"mb-8",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)(r.A,{size:18,className:"text-warning"}),(0,x.jsx)("span",{className:"font-medium text-text",children:p("progress.title")})]}),D&&(0,x.jsxs)("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ".concat(null!==O&&void 0!==O&&O.completed?"bg-success/20 text-success hover:bg-success/30":"bg-primary text-white hover:brightness-110 shadow-soft"),children:[(0,x.jsx)(i,{size:18}),null!==O&&void 0!==O&&O.completed?"".concat(p("quiz.title"),": ").concat(O.score,"%"):p("quiz.takeQuiz")]})]}),F&&G&&(0,x.jsxs)("div",{"data-testid":"practice-challenge-card",className:"mb-4 p-4 rounded-2xl border border-primary/20 bg-gradient-to-br from-primary/10 to-transparent",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3",children:[(0,x.jsxs)("div",{className:"rounded-lg border px-3 py-2 ".concat(H?"border-success/30 bg-success/10":"border-border bg-bg/40"),children:[(0,x.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Quiz gate"}),(0,x.jsxs)("p",{className:"text-sm font-semibold ".concat(H?"text-success":"text-text"),children:[null!==(t=null===O||void 0===O?void 0:O.score)&&void 0!==t?t:0,"% / 70%"]})]}),(0,x.jsxs)("div",{className:"rounded-lg border px-3 py-2 ".concat(G.bestScore>=F.passScore?"border-success/30 bg-success/10":"border-border bg-bg/40"),children:[(0,x.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Practice gate"}),(0,x.jsxs)("p",{className:"text-sm font-semibold ".concat(G.bestScore>=F.passScore?"text-success":"text-text"),children:[G.bestScore,"/100"]})]})]}),(0,x.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-3",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)(n,{size:18,className:"text-primary"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"font-semibold text-text tracking-tight",children:"Practice Challenge"}),(0,x.jsxs)("p",{"data-testid":"practice-status",className:"text-xs text-muted",children:["Status: ",ue[G.status]||G.status]})]})]}),(0,x.jsx)("button",{"data-testid":"open-practice-challenge",onClick:()=>A(!0),className:"px-3 py-2 rounded-lg text-sm font-medium ".concat("passed"===G.status?"bg-success/20 text-success border border-success/30":"attempts_exhausted"===G.status?"bg-indigo-600 text-white hover:bg-indigo-500":"bg-primary text-white hover:brightness-110 shadow-soft"),children:"passed"===G.status?"Review Submission":"attempts_exhausted"===G.status?"Request AI Help":"Open Challenge"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs mb-2",children:[(0,x.jsxs)("div",{className:"rounded-lg border border-border bg-bg/40 px-3 py-2",children:[(0,x.jsx)("span",{className:"text-muted",children:"Best score"}),(0,x.jsxs)("p",{className:"text-text font-semibold mt-0.5",children:[G.bestScore,"/100"]})]}),(0,x.jsxs)("div",{className:"rounded-lg border border-border bg-bg/40 px-3 py-2",children:[(0,x.jsx)("span",{className:"text-muted",children:"Attempts"}),(0,x.jsxs)("p",{className:"text-text font-semibold mt-0.5",children:[G.attempts.length,"/",F.maxAttempts]})]})]}),(0,x.jsx)("div",{className:"h-1.5 rounded-full bg-border/40 overflow-hidden",children:(0,x.jsx)("div",{className:"h-full ".concat(G.bestScore>=F.passScore?"bg-success":"bg-accent"),style:{width:"".concat(Math.min(100,G.bestScore),"%")}})})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,x.jsx)("span",{className:"text-muted",children:p("progress.materials")}),(0,x.jsxs)("span",{className:"text-text",children:[L.materialsCompleted," / ",L.materialsTotal]})]}),(0,x.jsx)("div",{className:"h-1.5 rounded-full overflow-hidden bg-border/40",children:(0,x.jsx)("div",{className:"h-full transition-all duration-500 ".concat(100===L.materialsProgress?"bg-success":"bg-primary shadow-[0_0_10px_rgba(255,122,0,0.35)]"),style:{width:"".concat(L.materialsProgress,"%")}})})]}),F&&(0,x.jsxs)("p",{className:"text-xs text-muted mt-3",children:["Stage unlock rule: quiz >= 70% and practice >= ",F.passScore,"/100. Current stage: ",L.stageCompleted?"completed":"in progress","."]})]}),(0,x.jsx)("div",{className:"mb-4",children:(0,x.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:T?"".concat(p("knowledge.searchResults")||"Search results for",' "').concat(T,'"'):"all"===w?p("knowledge.allCourses")||"All Courses":null===(s=y.courses.find(e=>e.id===w))||void 0===s?void 0:s.name})}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:0===I.length?(0,x.jsxs)("div",{className:"col-span-full text-center py-12 text-muted",children:[(0,x.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-border/20",children:(0,x.jsx)(o.A,{className:"w-8 h-8 opacity-50"})}),(0,x.jsx)("p",{className:"text-lg font-medium mb-1",children:T?p("knowledge.noSearchResults")||"No modules found":p("knowledge.noMaterials")}),T&&(0,x.jsx)("p",{className:"text-sm opacity-70",children:p("knowledge.tryDifferentSearch")||'Try specific keywords like "React" or "Basics"'})]}):I.map(e=>(0,x.jsx)(f,{material:e,onOpen:()=>E(e)},"".concat(e.id,"-").concat(_)))})]})}),M&&(0,x.jsx)(q,{material:M,onClose:()=>{E(null),Q()},onProgressChange:Q}),k&&D&&(0,x.jsx)(P,{quiz:D,onClose:()=>C(!1),onComplete:B}),S&&F&&"all"!==w&&(0,x.jsx)(Z,{task:F,stageId:w,attempts:(null===G||void 0===G?void 0:G.attempts)||[],language:v,onClose:()=>A(!1),onSubmitted:X})]}):null}},6609(e,t,s){s.d(t,{Q:()=>N});var a=s(9379),r=s(3986),l=s(5043),i=s(5012),n=s(2817),o=s(95),c=s(9402);const d=e=>new Date(e).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"});var m=s(1024),u=s(5979),x=s(6180),g=s(4187),h=s(5794),p=s(2771),b=s(579);const y=e=>{let{language:t,value:s}=e;const{theme:a}=(0,p.D)(),{t:r}=(0,c.o)(),[i,n]=(0,l.useState)(!1);return(0,b.jsxs)("div",{className:"relative group my-4",children:[(0,b.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(s),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"absolute right-2 top-2 p-2 rounded bg-gray-700 hover:bg-gray-600 text-white opacity-0 group-hover:opacity-100 transition-opacity z-10",title:r(i?"common.copied":"common.copy"),"aria-label":r(i?"common.copied":"common.copy"),children:i?(0,b.jsx)(m.A,{className:"w-4 h-4 text-green-400","aria-hidden":"true"}):(0,b.jsx)(u.A,{className:"w-4 h-4","aria-hidden":"true"})}),(0,b.jsx)(x.A,{language:t,style:"dark"===a?g.A:h.A,customStyle:{borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",margin:0},children:s})]})};var f=s(7651),v=s(5648);const j=e=>{let{rating:t,onRate:s}=e;const{theme:a}=(0,p.D)(),r=e=>"p-1 rounded hover:bg-opacity-20 hover:bg-white transition ".concat(t===e?"up"===e?"text-green-500":"text-red-500":"dark"===a?"text-gray-400":"text-gray-500");return(0,b.jsxs)("div",{className:"flex gap-2",role:"group","aria-label":"\u041e\u0446\u0435\u043d\u043a\u0430 \u043e\u0442\u0432\u0435\u0442\u0430",children:[(0,b.jsx)("button",{onClick:()=>s("up"),className:r("up"),title:"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442","aria-label":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439","aria-pressed":"up"===t,children:(0,b.jsx)(f.A,{className:"w-4 h-4","aria-hidden":"true"})}),(0,b.jsx)("button",{onClick:()=>s("down"),className:r("down"),title:"\u041d\u0435 \u043f\u043e\u043c\u043e\u0433","aria-label":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u0435\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439","aria-pressed":"down"===t,children:(0,b.jsx)(v.A,{className:"w-4 h-4","aria-hidden":"true"})})]})},w=["node","inline","className","children"],N=(0,l.memo)(e=>{let{message:t,onRate:s}=e;const{t:l}=(0,c.o)();return"user"===t.role?(0,b.jsxs)("article",{className:"flex flex-row-reverse gap-2 md:gap-4 group animate-slideUp",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/15 border border-border flex items-center justify-center",children:(0,b.jsx)(n.A,{className:"w-4 h-4 text-primary"})})}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2 max-w-2xl",children:[(0,b.jsx)("div",{className:"bg-primary/15 border border-border rounded-2xl rounded-tr-sm px-4 py-2 md:px-5 md:py-3 shadow-soft",children:(0,b.jsx)("p",{className:"text-sm text-text font-medium whitespace-pre-wrap",children:t.content})}),(0,b.jsx)("span",{className:"text-[10px] text-muted mr-1",children:d(t.timestamp)})]})]}):(0,b.jsxs)("article",{className:"flex gap-2 md:gap-4 group animate-slideUp",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,b.jsx)("div",{className:"w-8 h-8 rounded-xl bg-surface border border-border flex items-center justify-center",children:(0,b.jsx)(o.A,{className:"w-4 h-4 text-accent"})})}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 max-w-3xl w-full",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2 mb-1",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-text",children:l("chat.assistant")}),(0,b.jsx)("span",{className:"text-[10px] text-muted",children:d(t.timestamp)})]}),(0,b.jsx)("div",{className:"prose max-w-none text-sm text-text",children:(0,b.jsx)(i.$,{components:{code(e){let{node:t,inline:s,className:l,children:i}=e,n=(0,r.A)(e,w);const o=/language-(\w+)/.exec(l||"");return!s&&o?(0,b.jsx)(y,(0,a.A)({language:o[1],value:String(i).replace(/\n$/,"")},n)):(0,b.jsx)("code",(0,a.A)((0,a.A)({className:"text-primary bg-primary/10 px-1.5 py-0.5 rounded text-xs font-mono"},n),{},{children:i}))},p(e){let{children:t}=e;return(0,b.jsx)("p",{className:"leading-7 text-text",children:t})},strong(e){let{children:t}=e;return(0,b.jsx)("strong",{className:"font-semibold text-text",children:t})},ul(e){let{children:t}=e;return(0,b.jsx)("ul",{className:"list-disc pl-4 space-y-1 mt-2 mb-4 text-muted marker:text-primary",children:t})},ol(e){let{children:t}=e;return(0,b.jsx)("ol",{className:"list-decimal pl-4 space-y-1 mt-2 mb-4 text-muted",children:t})}},children:t.content})}),(0,b.jsx)("div",{className:"flex gap-3 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,b.jsx)(j,{rating:t.rating,onRate:e=>{s(t.id,e)}})})]})]})})},7561(e,t,s){s.d(t,{I:()=>o});var a=s(7772),r=s(2771),l=s(9402),i=s(6110),n=s(579);const o=()=>{const{theme:e}=(0,r.D)(),{t:t}=(0,l.o)();return(0,n.jsx)("div",{className:"flex justify-start mb-4 animate-fadeIn",role:"status","aria-live":"polite",children:(0,n.jsxs)("div",{className:"".concat(i.Q.card(e)," border rounded-lg p-4 flex items-center gap-2 shadow-sm"),children:[(0,n.jsx)(a.A,{className:"w-4 h-4 animate-spin text-primary","aria-hidden":"true"}),(0,n.jsx)("span",{className:"".concat(i.Q.textSecondary(e)," text-sm"),children:t("chat.thinking")})]})})}},9780(e,t,s){s.d(t,{Z:()=>o});var a=s(9379),r=s(3986),l=s(6110),i=s(579);const n=["className","children","variant"],o=e=>{let{className:t,children:s,variant:o="surface"}=e,c=(0,r.A)(e,n);return(0,i.jsx)("div",(0,a.A)((0,a.A)({className:(0,l.cn)("rounded-lg p-4",{surface:"surface-card",glass:"glass-card",soft:"bg-border/20 border border-border"}[o],t)},c),{},{children:s}))}}}]);
//# sourceMappingURL=354.ff100388.chunk.js.map