"use strict";(self.webpackChunkeducational_ai_platform=self.webpackChunkeducational_ai_platform||[]).push([[339],{1339(e,t,a){a.d(t,{ChatView:()=>c});var s=a(5043),r=a(6609),l=a(3246),n=a(7561),i=a(6734),o=a(579);const c=e=>{let{messages:t,loading:a,onSend:c,onRate:d}=e;const m=(0,s.useRef)(null),{playSound:x}=(0,i.t)(),h=(0,s.useRef)(t.length);return(0,s.useEffect)(()=>{var e;if(null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),t.length>h.current){"user"===t[t.length-1].role?x("message"):x("receive"),h.current=t.length}},[t,x]),(0,o.jsxs)("div",{className:"h-full flex flex-col relative",children:[(0,o.jsx)("div",{className:"flex-1 overflow-y-auto w-full max-w-4xl mx-auto px-4 pb-40 md:pb-32",children:(0,o.jsxs)("div",{className:"flex flex-col gap-4 md:gap-10 py-4",children:[t.map(e=>(0,o.jsx)(r.Q,{message:e,onRate:d},e.id)),a&&(0,o.jsx)(n.I,{}),(0,o.jsx)("div",{ref:m})]})}),(0,o.jsx)("div",{className:"fixed bottom-20 md:bottom-8 left-0 right-0 px-4 flex flex-col items-center z-40 pointer-events-none",children:(0,o.jsx)("div",{className:"w-full max-w-3xl pointer-events-auto",children:(0,o.jsx)(l.V,{onSend:c,loading:a})})})]})}},3246(e,t,a){a.d(t,{V:()=>c});var s=a(5043),r=a(2380),l=a(430),n=a(9402),i=a(8250),o=a(579);const c=e=>{let{onSend:t,loading:a}=e;const{t:c}=(0,n.o)(),[d,m]=(0,s.useState)(""),x=()=>{const e=d.trim();e&&!a&&e.length<=i.b1.MAX_MESSAGE_LENGTH&&(t(e),m(""))};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"relative group",children:[(0,o.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-primary to-accent opacity-20 blur transition duration-500"}),(0,o.jsxs)("div",{className:"relative flex items-center bg-surface border border-border rounded-lg p-2 transition-all duration-300",children:[(0,o.jsx)("button",{type:"button",className:"p-2 text-muted hover:text-text hover:bg-border/30 transition-colors rounded-md","aria-label":"Add attachment",children:(0,o.jsx)(r.A,{className:"w-5 h-5"})}),(0,o.jsx)("label",{htmlFor:"chat-input",className:"sr-only",children:c("chat.inputLabel")}),(0,o.jsx)("input",{id:"chat-input",type:"text",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x()),"Escape"===e.key&&m("")},placeholder:c("chat.placeholder"),maxLength:i.b1.MAX_MESSAGE_LENGTH,className:"w-full bg-transparent border-none text-text placeholder:text-muted focus:ring-0 text-sm py-3 px-2 focus:outline-none",disabled:a}),(0,o.jsx)("button",{onClick:x,disabled:a||!d.trim(),className:"p-2 bg-primary text-white hover:brightness-110 rounded-md transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed","aria-label":c("chat.sendLabel"),children:(0,o.jsx)(l.A,{className:"w-5 h-5"})})]})]}),(0,o.jsx)("p",{className:"text-center text-[10px] text-muted mt-3 font-medium tracking-wide",children:c("chat.disclaimer")||"AI can make mistakes. Consider checking important information."})]})}},6609(e,t,a){a.d(t,{Q:()=>w});var s=a(9379),r=a(3986),l=a(5043),n=a(5012),i=a(2817),o=a(95),c=a(9402);const d=e=>new Date(e).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"});var m=a(1024),x=a(5979),h=a(6180),p=a(4187),u=a(5794),g=a(2771),b=a(579);const f=e=>{let{language:t,value:a}=e;const{theme:s}=(0,g.D)(),{t:r}=(0,c.o)(),[n,i]=(0,l.useState)(!1);return(0,b.jsxs)("div",{className:"relative group my-4",children:[(0,b.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(a),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"absolute right-2 top-2 p-2 rounded bg-gray-700 hover:bg-gray-600 text-white opacity-0 group-hover:opacity-100 transition-opacity z-10",title:r(n?"common.copied":"common.copy"),"aria-label":r(n?"common.copied":"common.copy"),children:n?(0,b.jsx)(m.A,{className:"w-4 h-4 text-green-400","aria-hidden":"true"}):(0,b.jsx)(x.A,{className:"w-4 h-4","aria-hidden":"true"})}),(0,b.jsx)(h.A,{language:t,style:"dark"===s?p.A:u.A,customStyle:{borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",margin:0},children:a})]})};var j=a(7651),v=a(5648);const N=e=>{let{rating:t,onRate:a}=e;const{theme:s}=(0,g.D)(),r=e=>"p-1 rounded hover:bg-opacity-20 hover:bg-white transition ".concat(t===e?"up"===e?"text-green-500":"text-red-500":"dark"===s?"text-gray-400":"text-gray-500");return(0,b.jsxs)("div",{className:"flex gap-2",role:"group","aria-label":"\u041e\u0446\u0435\u043d\u043a\u0430 \u043e\u0442\u0432\u0435\u0442\u0430",children:[(0,b.jsx)("button",{onClick:()=>a("up"),className:r("up"),title:"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442","aria-label":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439","aria-pressed":"up"===t,children:(0,b.jsx)(j.A,{className:"w-4 h-4","aria-hidden":"true"})}),(0,b.jsx)("button",{onClick:()=>a("down"),className:r("down"),title:"\u041d\u0435 \u043f\u043e\u043c\u043e\u0433","aria-label":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u0435\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439","aria-pressed":"down"===t,children:(0,b.jsx)(v.A,{className:"w-4 h-4","aria-hidden":"true"})})]})},y=["node","inline","className","children"],w=(0,l.memo)(e=>{let{message:t,onRate:a}=e;const{t:l}=(0,c.o)();return"user"===t.role?(0,b.jsxs)("article",{className:"flex flex-row-reverse gap-2 md:gap-4 group animate-slideUp",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/15 border border-border flex items-center justify-center",children:(0,b.jsx)(i.A,{className:"w-4 h-4 text-primary"})})}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2 max-w-2xl",children:[(0,b.jsx)("div",{className:"bg-primary/15 border border-border rounded-2xl rounded-tr-sm px-4 py-2 md:px-5 md:py-3 shadow-soft",children:(0,b.jsx)("p",{className:"text-sm text-text font-medium whitespace-pre-wrap",children:t.content})}),(0,b.jsx)("span",{className:"text-[10px] text-muted mr-1",children:d(t.timestamp)})]})]}):(0,b.jsxs)("article",{className:"flex gap-2 md:gap-4 group animate-slideUp",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,b.jsx)("div",{className:"w-8 h-8 rounded-xl bg-surface border border-border flex items-center justify-center",children:(0,b.jsx)(o.A,{className:"w-4 h-4 text-accent"})})}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 max-w-3xl w-full",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2 mb-1",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-text",children:l("chat.assistant")}),(0,b.jsx)("span",{className:"text-[10px] text-muted",children:d(t.timestamp)})]}),(0,b.jsx)("div",{className:"prose max-w-none text-sm text-text",children:(0,b.jsx)(n.$,{components:{code(e){let{node:t,inline:a,className:l,children:n}=e,i=(0,r.A)(e,y);const o=/language-(\w+)/.exec(l||"");return!a&&o?(0,b.jsx)(f,(0,s.A)({language:o[1],value:String(n).replace(/\n$/,"")},i)):(0,b.jsx)("code",(0,s.A)((0,s.A)({className:"text-primary bg-primary/10 px-1.5 py-0.5 rounded text-xs font-mono"},i),{},{children:n}))},p(e){let{children:t}=e;return(0,b.jsx)("p",{className:"leading-7 text-text",children:t})},strong(e){let{children:t}=e;return(0,b.jsx)("strong",{className:"font-semibold text-text",children:t})},ul(e){let{children:t}=e;return(0,b.jsx)("ul",{className:"list-disc pl-4 space-y-1 mt-2 mb-4 text-muted marker:text-primary",children:t})},ol(e){let{children:t}=e;return(0,b.jsx)("ol",{className:"list-decimal pl-4 space-y-1 mt-2 mb-4 text-muted",children:t})}},children:t.content})}),(0,b.jsx)("div",{className:"flex gap-3 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,b.jsx)(N,{rating:t.rating,onRate:e=>{a(t.id,e)}})})]})]})})},7561(e,t,a){a.d(t,{I:()=>o});var s=a(7772),r=a(2771),l=a(9402),n=a(6110),i=a(579);const o=()=>{const{theme:e}=(0,r.D)(),{t:t}=(0,l.o)();return(0,i.jsx)("div",{className:"flex justify-start mb-4 animate-fadeIn",role:"status","aria-live":"polite",children:(0,i.jsxs)("div",{className:"".concat(n.Q.card(e)," border rounded-lg p-4 flex items-center gap-2 shadow-sm"),children:[(0,i.jsx)(s.A,{className:"w-4 h-4 animate-spin text-primary","aria-hidden":"true"}),(0,i.jsx)("span",{className:"".concat(n.Q.textSecondary(e)," text-sm"),children:t("chat.thinking")})]})})}}}]);
//# sourceMappingURL=339.acadecfc.chunk.js.map