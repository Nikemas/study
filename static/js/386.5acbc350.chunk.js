"use strict";(self.webpackChunkeducational_ai_platform=self.webpackChunkeducational_ai_platform||[]).push([[386],{8386(e,a,t){t.d(a,{ChatView:()=>D});var s=t(5043),n=t(2771),r=t(6110),l=t(9379),i=t(3986),c=t(5012),o=t(9402);var d=t(1024),h=t(5979),m=t(6180),g=t(4187),u=t(5794),x=t(579);const p=e=>{let{language:a,value:t}=e;const{theme:r}=(0,n.D)(),[l,i]=(0,s.useState)(!1);return(0,x.jsxs)("div",{className:"relative group my-4",children:[(0,x.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(t),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"absolute right-2 top-2 p-2 rounded bg-gray-700 hover:bg-gray-600 text-white opacity-0 group-hover:opacity-100 transition-opacity z-10",title:"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434","aria-label":l?"\u041a\u043e\u0434 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d":"\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434",children:l?(0,x.jsx)(d.A,{className:"w-4 h-4 text-green-400","aria-hidden":"true"}):(0,x.jsx)(h.A,{className:"w-4 h-4","aria-hidden":"true"})}),(0,x.jsx)(m.A,{language:a,style:"dark"===r?g.A:u.A,customStyle:{borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",margin:0},children:t})]})};var b=t(7651),j=t(5648);const y=e=>{let{rating:a,onRate:t}=e;const{theme:s}=(0,n.D)(),r=e=>"p-1 rounded hover:bg-opacity-20 hover:bg-white transition ".concat(a===e?"up"===e?"text-green-500":"text-red-500":"dark"===s?"text-gray-400":"text-gray-500");return(0,x.jsxs)("div",{className:"flex gap-2",role:"group","aria-label":"\u041e\u0446\u0435\u043d\u043a\u0430 \u043e\u0442\u0432\u0435\u0442\u0430",children:[(0,x.jsx)("button",{onClick:()=>t("up"),className:r("up"),title:"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442","aria-label":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439","aria-pressed":"up"===a,children:(0,x.jsx)(b.A,{className:"w-4 h-4","aria-hidden":"true"})}),(0,x.jsx)("button",{onClick:()=>t("down"),className:r("down"),title:"\u041d\u0435 \u043f\u043e\u043c\u043e\u0433","aria-label":"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u0435\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439","aria-pressed":"down"===a,children:(0,x.jsx)(j.A,{className:"w-4 h-4","aria-hidden":"true"})})]})},v=["node","inline","className","children"],w=(0,s.memo)(e=>{let{message:a,onRate:t}=e;const{theme:s}=(0,n.D)(),{t:r}=(0,o.o)(),d="user"===a.role,h=d?"bg-indigo-600 text-white":"dark"===s?"bg-gray-800 text-gray-100 border border-gray-700":"bg-gray-100 text-gray-800";return(0,x.jsx)("article",{className:"flex ".concat(d?"justify-end":"justify-start"," mb-4 animate-slideIn"),"aria-label":r(d?"chat.userMessage":"chat.assistantMessage"),children:(0,x.jsxs)("div",{className:"max-w-[85%] rounded-lg p-4 shadow-sm ".concat(h),children:[(0,x.jsx)("div",{className:"prose prose-sm max-w-none",children:d?(0,x.jsx)("p",{className:"whitespace-pre-wrap m-0",children:a.content}):(0,x.jsx)(c.$,{components:{code(e){let{node:a,inline:t,className:n,children:r}=e,c=(0,i.A)(e,v);const o=/language-(\w+)/.exec(n||"");return!t&&o?(0,x.jsx)(p,(0,l.A)({language:o[1],value:String(r).replace(/\n$/,"")},c)):(0,x.jsx)("code",(0,l.A)((0,l.A)({className:"".concat("dark"===s?"bg-gray-700":"bg-gray-200"," px-1 py-0.5 rounded text-sm")},c),{},{children:r}))},p(e){let{children:a}=e;return(0,x.jsx)("p",{className:"my-2",children:a})},ul(e){let{children:a}=e;return(0,x.jsx)("ul",{className:"my-2 ml-4",children:a})},ol(e){let{children:a}=e;return(0,x.jsx)("ol",{className:"my-2 ml-4",children:a})}},children:a.content})}),(0,x.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs opacity-70",children:[(0,x.jsx)("span",{children:(m=a.timestamp,new Date(m).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}))}),!d&&(0,x.jsx)(y,{rating:a.rating,onRate:e=>{t(a.id,e)}})]})]})});var m});var N=t(430),f=t(6339),A=t(8250);const k=e=>{let{onSend:a,onClear:t,loading:l}=e;const{theme:i}=(0,n.D)(),{t:c}=(0,o.o)(),[d,h]=(0,s.useState)(""),m=()=>{const e=d.trim();e&&!l&&e.length<=A.b1.MAX_MESSAGE_LENGTH&&(a(e),h(""))};return(0,x.jsxs)("div",{className:"".concat(r.Q.card(i)," border rounded-lg shadow-md p-4"),children:[(0,x.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,x.jsx)("label",{htmlFor:"chat-input",className:"sr-only",children:c("chat.inputLabel")}),(0,x.jsx)("input",{id:"chat-input",type:"text",value:d,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())},placeholder:c("chat.placeholder"),maxLength:A.b1.MAX_MESSAGE_LENGTH,className:"flex-1 px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition ".concat(r.Q.input(i)),disabled:l}),(0,x.jsxs)("button",{onClick:m,disabled:l||!d.trim(),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition flex items-center gap-2 shadow-sm","aria-label":c("chat.sendLabel"),children:[(0,x.jsx)(N.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{className:"hidden sm:inline",children:c("chat.send")})]}),(0,x.jsx)("button",{onClick:t,className:"px-4 py-3 rounded-lg transition ".concat("dark"===i?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"),title:c("chat.newChat"),"aria-label":c("chat.newChatLabel"),children:(0,x.jsx)(f.A,{className:"w-4 h-4"})})]}),(0,x.jsx)("div",{className:"text-xs ".concat(r.Q.textMuted(i)),children:c("chat.examples")})]})};var C=t(7772);const S=()=>{const{theme:e}=(0,n.D)(),{t:a}=(0,o.o)();return(0,x.jsx)("div",{className:"flex justify-start mb-4 animate-fadeIn",role:"status","aria-live":"polite",children:(0,x.jsxs)("div",{className:"".concat(r.Q.card(e)," border rounded-lg p-4 flex items-center gap-2 shadow-sm"),children:[(0,x.jsx)(C.A,{className:"w-4 h-4 animate-spin text-indigo-600","aria-hidden":"true"}),(0,x.jsx)("span",{className:"".concat(r.Q.textSecondary(e)," text-sm"),children:a("chat.thinking")})]})})},D=e=>{let{messages:a,loading:t,onSend:l,onClear:i,onRate:c}=e;const{theme:o}=(0,n.D)(),d=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var e;null===(e=d.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[a]),(0,x.jsxs)("div",{className:"max-w-5xl mx-auto h-full flex flex-col p-4",children:[(0,x.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4 p-4 ".concat(r.Q.bg(o)," rounded-lg shadow-sm"),children:[a.map(e=>(0,x.jsx)(w,{message:e,onRate:c},e.id)),t&&(0,x.jsx)(S,{}),(0,x.jsx)("div",{ref:d})]}),(0,x.jsx)(k,{onSend:l,onClear:i,loading:t})]})}}}]);
//# sourceMappingURL=386.5acbc350.chunk.js.map